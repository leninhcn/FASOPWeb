{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { h, ref, onUnmounted, Teleport } from 'vue';\nimport { noop } from '../../utils/event.js';\nimport { addFocusWaitFlag, removeFocusWaitFlag } from '../../utils/private/focus-manager.js';\nimport { createGlobalNode, removeGlobalNode } from '../../utils/private/global-nodes.js';\nimport { portalProxyList } from '../../utils/private/portal.js';\nimport { injectProp } from '../../utils/private/inject-obj-prop.js';\nfunction isOnGlobalDialog(vm) {\n  vm = vm.parent;\n  while (vm !== void 0 && vm !== null) {\n    if (vm.type.name === 'QGlobalDialog') {\n      return true;\n    }\n    if (vm.type.name === 'QDialog' || vm.type.name === 'QMenu') {\n      return false;\n    }\n    vm = vm.parent;\n  }\n  return false;\n}\n\n// Warning!\n// You MUST specify \"inheritAttrs: false\" in your component\n\nexport default function (vm, innerRef, renderPortalContent, type) {\n  // showing, including while in show/hide transition\n  const portalIsActive = ref(false);\n\n  // showing & not in any show/hide transition\n  const portalIsAccessible = ref(false);\n  if (__QUASAR_SSR_SERVER__) {\n    return {\n      portalIsActive,\n      portalIsAccessible,\n      showPortal: noop,\n      hidePortal: noop,\n      renderPortal: noop\n    };\n  }\n  let portalEl = null;\n  const focusObj = {};\n  const onGlobalDialog = type === 'dialog' && isOnGlobalDialog(vm);\n  function showPortal(isReady) {\n    if (isReady === true) {\n      removeFocusWaitFlag(focusObj);\n      portalIsAccessible.value = true;\n      return;\n    }\n    portalIsAccessible.value = false;\n    if (portalIsActive.value === false) {\n      if (onGlobalDialog === false && portalEl === null) {\n        portalEl = createGlobalNode(false, type);\n      }\n      portalIsActive.value = true;\n\n      // register portal\n      portalProxyList.push(vm.proxy);\n      addFocusWaitFlag(focusObj);\n    }\n  }\n  function hidePortal(isReady) {\n    portalIsAccessible.value = false;\n    if (isReady !== true) {\n      return;\n    }\n    removeFocusWaitFlag(focusObj);\n    portalIsActive.value = false;\n\n    // unregister portal\n    const index = portalProxyList.indexOf(vm.proxy);\n    if (index !== -1) {\n      portalProxyList.splice(index, 1);\n    }\n    if (portalEl !== null) {\n      removeGlobalNode(portalEl);\n      portalEl = null;\n    }\n  }\n  onUnmounted(() => {\n    hidePortal(true);\n  });\n\n  // needed for portal vm detection\n  vm.proxy.__qPortal = true;\n\n  // public way of accessing the rendered content\n  injectProp(vm.proxy, 'contentEl', () => innerRef.value);\n  return {\n    showPortal,\n    hidePortal,\n    portalIsActive,\n    portalIsAccessible,\n    renderPortal: () => onGlobalDialog === true ? renderPortalContent() : portalIsActive.value === true ? [h(Teleport, {\n      to: portalEl\n    }, renderPortalContent())] : void 0\n  };\n}","map":{"version":3,"names":["h","ref","onUnmounted","Teleport","noop","addFocusWaitFlag","removeFocusWaitFlag","createGlobalNode","removeGlobalNode","portalProxyList","injectProp","isOnGlobalDialog","vm","parent","type","name","innerRef","renderPortalContent","portalIsActive","portalIsAccessible","__QUASAR_SSR_SERVER__","showPortal","hidePortal","renderPortal","portalEl","focusObj","onGlobalDialog","isReady","value","push","proxy","index","indexOf","splice","__qPortal","to"],"sources":["D:/LearnVueJS/Vue3/Projects/fa-sop-online/node_modules/quasar/src/composables/private/use-portal.js"],"sourcesContent":["import { h, ref, onUnmounted, Teleport } from 'vue'\n\nimport { noop } from '../../utils/event.js'\nimport { addFocusWaitFlag, removeFocusWaitFlag } from '../../utils/private/focus-manager.js'\nimport { createGlobalNode, removeGlobalNode } from '../../utils/private/global-nodes.js'\nimport { portalProxyList } from '../../utils/private/portal.js'\nimport { injectProp } from '../../utils/private/inject-obj-prop.js'\n\nfunction isOnGlobalDialog (vm) {\n  vm = vm.parent\n\n  while (vm !== void 0 && vm !== null) {\n    if (vm.type.name === 'QGlobalDialog') {\n      return true\n    }\n    if (vm.type.name === 'QDialog' || vm.type.name === 'QMenu') {\n      return false\n    }\n\n    vm = vm.parent\n  }\n\n  return false\n}\n\n// Warning!\n// You MUST specify \"inheritAttrs: false\" in your component\n\nexport default function (vm, innerRef, renderPortalContent, type) {\n  // showing, including while in show/hide transition\n  const portalIsActive = ref(false)\n\n  // showing & not in any show/hide transition\n  const portalIsAccessible = ref(false)\n\n  if (__QUASAR_SSR_SERVER__) {\n    return {\n      portalIsActive,\n      portalIsAccessible,\n\n      showPortal: noop,\n      hidePortal: noop,\n      renderPortal: noop\n    }\n  }\n\n  let portalEl = null\n  const focusObj = {}\n  const onGlobalDialog = type === 'dialog' && isOnGlobalDialog(vm)\n\n  function showPortal (isReady) {\n    if (isReady === true) {\n      removeFocusWaitFlag(focusObj)\n      portalIsAccessible.value = true\n      return\n    }\n\n    portalIsAccessible.value = false\n\n    if (portalIsActive.value === false) {\n      if (onGlobalDialog === false && portalEl === null) {\n        portalEl = createGlobalNode(false, type)\n      }\n\n      portalIsActive.value = true\n\n      // register portal\n      portalProxyList.push(vm.proxy)\n\n      addFocusWaitFlag(focusObj)\n    }\n  }\n\n  function hidePortal (isReady) {\n    portalIsAccessible.value = false\n\n    if (isReady !== true) { return }\n\n    removeFocusWaitFlag(focusObj)\n    portalIsActive.value = false\n\n    // unregister portal\n    const index = portalProxyList.indexOf(vm.proxy)\n    if (index !== -1) {\n      portalProxyList.splice(index, 1)\n    }\n\n    if (portalEl !== null) {\n      removeGlobalNode(portalEl)\n      portalEl = null\n    }\n  }\n\n  onUnmounted(() => { hidePortal(true) })\n\n  // needed for portal vm detection\n  vm.proxy.__qPortal = true\n\n  // public way of accessing the rendered content\n  injectProp(vm.proxy, 'contentEl', () => innerRef.value)\n\n  return {\n    showPortal,\n    hidePortal,\n\n    portalIsActive,\n    portalIsAccessible,\n\n    renderPortal: () => (\n      onGlobalDialog === true\n        ? renderPortalContent()\n        : (\n            portalIsActive.value === true\n              ? [ h(Teleport, { to: portalEl }, renderPortalContent()) ]\n              : void 0\n          )\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}