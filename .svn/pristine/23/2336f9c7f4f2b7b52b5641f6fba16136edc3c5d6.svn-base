{"ast":null,"code":"import { resolveComponent as _resolveComponent, withKeys as _withKeys, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ce0f89d6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"eltb\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_sop_step = _resolveComponent(\"sop_step\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_form, {\n    inline: true,\n    model: $data.searchData,\n    class: \"demo-form-inline\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"Serial Number\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.searchData.serial_number,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchData.serial_number = $event),\n        onKeyup: _withKeys($options.LoadSNError, [\"enter\"]),\n        placeholder: \"Serial Number\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Error Code\"\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.snErrorCodes, (item, index) => {\n        return _openBlock(), _createBlock(_component_el_select, {\n          key: index,\n          onChange: $options.getSOPbyErrorCode,\n          modelValue: $data.searchData.er_code,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchData.er_code = $event),\n          placeholder: \"Error Code\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: item,\n            value: item\n          }, null, 8 /* PROPS */, [\"label\", \"value\"])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onChange\", \"modelValue\"]);\n      }), 128 /* KEYED_FRAGMENT */))]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.onSubmit\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Query\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_el_table, {\n    data: _ctx.sop_list,\n    onRowClick: $options.handleRowClick,\n    \"row-style\": $options.rowCustomStyle\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      property: \"DEFECT_CODE\",\n      label: \"Error Code\"\n    }), _createVNode(_component_el_table_column, {\n      property: \"SOP_NAME\",\n      label: \"SOP Name\"\n    }), _createVNode(_component_el_table_column, {\n      property: \"DESCRIPTIONS\",\n      label: \"Descriptions\"\n    }), _createVNode(_component_el_table_column, {\n      property: \"UPDATE_TIME\",\n      label: \"Update Time\"\n    }), _createVNode(_component_el_table_column, {\n      property: \"UPDATE_USER\",\n      label: \"Update User\"\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\", \"onRowClick\", \"row-style\"]), _createVNode(_component_el_dialog, {\n    modelValue: $data.showDetail,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.showDetail = $event),\n    title: $data.current_sop_name\n  }, {\n    default: _withCtx(() => [$data.showDetail ? (_openBlock(), _createBlock(_component_sop_step, {\n      key: 0,\n      sop_id: $data.current_id\n    }, null, 8 /* PROPS */, [\"sop_id\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_form","inline","model","$data","searchData","_component_el_form_item","label","_component_el_input","serial_number","$event","onKeyup","_withKeys","$options","LoadSNError","placeholder","_Fragment","_renderList","snErrorCodes","item","index","_createBlock","_component_el_select","key","onChange","getSOPbyErrorCode","er_code","_component_el_option","value","_component_el_button","type","onClick","onSubmit","_component_el_table","data","_ctx","sop_list","onRowClick","handleRowClick","rowCustomStyle","_component_el_table_column","property","_component_el_dialog","showDetail","title","current_sop_name","_component_sop_step","sop_id","current_id"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\FAComs\\RepairSOP.vue"],"sourcesContent":["<template>\r\n    <div class=\"eltb\">\r\n        <el-form :inline=\"true\" :model=\"searchData\" class=\"demo-form-inline\">\r\n            <el-form-item label=\"Serial Number\">\r\n                <el-input v-model=\"searchData.serial_number\" @keyup.enter=\"LoadSNError\" placeholder=\"Serial Number\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Error Code\">\r\n                <el-select v-for=\"(item, index) in snErrorCodes\" :key=\"index\" @change=\"getSOPbyErrorCode\"\r\n                    v-model=\"searchData.er_code\" placeholder=\"Error Code\">\r\n                    <el-option :label=\"item\" :value=\"item\" />\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">Query</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        <el-table :data=\"sop_list\" @row-click=\"handleRowClick\" :row-style=\"rowCustomStyle\">\r\n            <el-table-column property=\"DEFECT_CODE\" label=\"Error Code\" />\r\n            <el-table-column property=\"SOP_NAME\" label=\"SOP Name\" />\r\n            <el-table-column property=\"DESCRIPTIONS\" label=\"Descriptions\" />\r\n            <el-table-column property=\"UPDATE_TIME\" label=\"Update Time\" />\r\n            <el-table-column property=\"UPDATE_USER\" label=\"Update User\" />\r\n        </el-table>\r\n        <el-dialog v-model=\"showDetail\" :title=\"current_sop_name\">\r\n            <sop_step v-if=\"showDetail\" :sop_id=\"current_id\"></sop_step>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport sop_step from './StepDetails.vue'\r\nimport {\r\n    mapActions,\r\n    mapGetters,\r\n    mapMutations\r\n} from \"vuex\";\r\nexport default {\r\n    mounted() {\r\n        this.UpdateSOP(undefined);\r\n    },\r\n    unmounted() {\r\n        this.UpdateSOP(undefined);\r\n        this.UpdateSOPstep(undefined);\r\n        this.current_id = 0;\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            sop_list: 'getSOPList',\r\n            sop_stt: 'getSOPstatus'\r\n        })\r\n    },\r\n    data() {\r\n        return {\r\n            searchData: {\r\n                serial_number: '',\r\n                er_id: '',\r\n                er_code: ''\r\n            },\r\n            showDetail: false,\r\n            current_id: 0,\r\n            current_sop_name: '',\r\n            gridData: [],\r\n            snErrorCodes: ['N/A']\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['GetSOPErrorCode']),\r\n        ...mapMutations(['UpdateSOP', 'UpdateSOPstep']),\r\n        async getSOPbyErrorCode(er_code) {\r\n            await this.GetSOPErrorCode(er_code).catch((err) => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: err.response.data,\r\n                });\r\n            })\r\n        },\r\n        handleRowClick(row) {\r\n            this.current_id = row.SOP_ID;\r\n            this.current_sop_name = row.SOP_NAME;\r\n            this.showDetail = true;\r\n        },\r\n        rowCustomStyle() {\r\n            return {\r\n                cursor: 'pointer'\r\n            };\r\n        },\r\n        async GetExistedErrorCode() {\r\n            await this.axios.get('').then((res) => {\r\n                this.snErrorCodes = [];\r\n                res.data.forEach(item => {\r\n                            this.snErrorCodes.push(item.DEFECT_CODE);\r\n                        });\r\n            }).catch((err) => {\r\n                console.log(err.response.data);\r\n            });\r\n        },\r\n        LoadSNError: async function () {\r\n            if (!this.searchData.serial_number) {\r\n                this.UpdateSOP(undefined);\r\n                return null;\r\n            }\r\n            await this.axios.get(`api/FAOnlineSOP/GetSNErrorCode/sn/${this.searchData.serial_number}`)\r\n                .then((result) => {\r\n                    this.snErrorCodes = [];\r\n                    if (result.data.length > 0) {\r\n                        // result.data.forEach(item => {\r\n                        //     this.snErrorCodes.push(item.DEFECT_CODE);\r\n                        // });\r\n                        this.searchData.er_code = result.data[0].DEFECT_CODE;\r\n                        this.GetSOPErrorCode(this.searchData.er_code);\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    this.$message({\r\n                        showClose: true,\r\n                        type: \"error\",\r\n                        message: err.response.data,\r\n                    });\r\n                    this.UpdateSOP(undefined);\r\n                   // this.snErrorCodes = ['N/A'];\r\n                    this.searchData.er_code = ''\r\n                });\r\n        },\r\n        onSubmit() {\r\n            if (!this.searchData.er_code) return;\r\n            this.GetSOPErrorCode(this.searchData.er_code);\r\n        }\r\n    },\r\n    components: {\r\n        sop_step\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.eltb {\r\n    height: 89vh;\r\n}\r\n</style>\r\n"],"mappings":";;;EACSA,KAAK,EAAC;AAAM;;;;;;;;;;;;uBAAjBC,mBAAA,CAyBM,OAzBNC,UAyBM,GAxBFC,YAAA,CAaUC,kBAAA;IAbAC,MAAM,EAAE,IAAI;IAAGC,KAAK,EAAEC,KAAA,CAAAC,UAAU;IAAER,KAAK,EAAC;;sBAC9C,MAEe,CAFfG,YAAA,CAEeM,uBAAA;MAFDC,KAAK,EAAC;IAAe;wBAC/B,MAAsG,CAAtGP,YAAA,CAAsGQ,mBAAA;oBAAnFJ,KAAA,CAAAC,UAAU,CAACI,aAAa;mEAAxBL,KAAA,CAAAC,UAAU,CAACI,aAAa,GAAAC,MAAA;QAAGC,OAAK,EAAAC,SAAA,CAAQC,QAAA,CAAAC,WAAW;QAAEC,WAAW,EAAC;;;QAExFf,YAAA,CAKeM,uBAAA;MALDC,KAAK,EAAC;IAAY;wBACjB,MAAqC,E,kBAAhDT,mBAAA,CAGYkB,SAAA,QAAAC,WAAA,CAHuBb,KAAA,CAAAc,YAAY,GAA5BC,IAAI,EAAEC,KAAK;6BAA9BC,YAAA,CAGYC,oBAAA;UAHsCC,GAAG,EAAEH,KAAK;UAAGI,QAAM,EAAEX,QAAA,CAAAY,iBAAiB;sBAC3ErB,KAAA,CAAAC,UAAU,CAACqB,OAAO;qEAAlBtB,KAAA,CAAAC,UAAU,CAACqB,OAAO,GAAAhB,MAAA;UAAEK,WAAW,EAAC;;4BACzC,MAAyC,CAAzCf,YAAA,CAAyC2B,oBAAA;YAA7BpB,KAAK,EAAEY,IAAI;YAAGS,KAAK,EAAET;;;;;;;QAGzCnB,YAAA,CAEeM,uBAAA;wBADX,MAA6D,CAA7DN,YAAA,CAA6D6B,oBAAA;QAAlDC,IAAI,EAAC,SAAS;QAAEC,OAAK,EAAElB,QAAA,CAAAmB;;0BAAU,MAAK,C,iBAAL,OAAK,E;;;;;;;gCAGzDhC,YAAA,CAMWiC,mBAAA;IANAC,IAAI,EAAEC,IAAA,CAAAC,QAAQ;IAAGC,UAAS,EAAExB,QAAA,CAAAyB,cAAc;IAAG,WAAS,EAAEzB,QAAA,CAAA0B;;sBAC/D,MAA6D,CAA7DvC,YAAA,CAA6DwC,0BAAA;MAA5CC,QAAQ,EAAC,aAAa;MAAClC,KAAK,EAAC;QAC9CP,YAAA,CAAwDwC,0BAAA;MAAvCC,QAAQ,EAAC,UAAU;MAAClC,KAAK,EAAC;QAC3CP,YAAA,CAAgEwC,0BAAA;MAA/CC,QAAQ,EAAC,cAAc;MAAClC,KAAK,EAAC;QAC/CP,YAAA,CAA8DwC,0BAAA;MAA7CC,QAAQ,EAAC,aAAa;MAAClC,KAAK,EAAC;QAC9CP,YAAA,CAA8DwC,0BAAA;MAA7CC,QAAQ,EAAC,aAAa;MAAClC,KAAK,EAAC;;;0DAElDP,YAAA,CAEY0C,oBAAA;gBAFQtC,KAAA,CAAAuC,UAAU;+DAAVvC,KAAA,CAAAuC,UAAU,GAAAjC,MAAA;IAAGkC,KAAK,EAAExC,KAAA,CAAAyC;;sBACpC,MAA4D,CAA5CzC,KAAA,CAAAuC,UAAU,I,cAA1BtB,YAAA,CAA4DyB,mBAAA;;MAA/BC,MAAM,EAAE3C,KAAA,CAAA4C"},"metadata":{},"sourceType":"module","externalDependencies":[]}