{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"text-gray-500\"\n};\nconst _hoisted_2 = {\n  class: \"text-gray-500\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"text-gray-500\"\n};\nconst _hoisted_5 = {\n  class: \"text-gray-500\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_Plus = _resolveComponent(\"Plus\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_form, {\n    \"label-position\": \"left\",\n    ref: \"ruleFormRef\",\n    model: $data.stepModel,\n    \"label-width\": \"120px\",\n    class: \"demo-ruleForm\",\n    \"status-icon\": \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"SOP ID\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_1, _toDisplayString($data.stepModel.SOP_ID), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Step Name\",\n      required: \"\",\n      prop: \"STEP_NAME\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.stepModel.STEP_NAME,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.stepModel.STEP_NAME = $event)\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Step Contents\",\n      prop: \"STEP_CONTENTS\",\n      required: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.stepModel.STEP_CONTENTS,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.stepModel.STEP_CONTENTS = $event),\n        type: \"textarea\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Sequence\",\n      prop: \"SEQ\",\n      required: \"\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_2, _toDisplayString($data.stepModel.SEQ), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Step Image\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_upload, {\n        \"file-list\": $data.fileList,\n        \"onUpdate:fileList\": _cache[2] || (_cache[2] = $event => $data.fileList = $event),\n        action: \"http://localhost:44354/api/upload\",\n        \"list-type\": \"picture-card\",\n        \"auto-upload\": true,\n        \"on-preview\": $options.handlePictureCardPreview,\n        \"on-remove\": $options.handleRemove\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Plus)]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"file-list\", \"on-preview\", \"on-remove\"]), _createVNode(_component_el_dialog, {\n        modelValue: $data.dialogVisible,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.dialogVisible = $event),\n        style: {\n          \"width\": \"fit-content\"\n        }\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"img\", {\n          \"w-full\": \"\",\n          src: $data.dialogImageUrl,\n          alt: \"Preview Image\"\n        }, null, 8 /* PROPS */, _hoisted_3)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Image ID\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_4, _toDisplayString($data.stepModel.STEP_IMG_ID), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"Update User\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_5, _toDisplayString($data.stepModel.UPDATE_USER), 1 /* TEXT */)]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.submitForm\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" Submit \")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        onClick: _cache[4] || (_cache[4] = $event => _ctx.$emit('CancelEvent'))\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Cancel\")]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createVNode","_component_el_form","ref","model","$data","stepModel","_component_el_form_item","label","_createElementVNode","_hoisted_1","_toDisplayString","SOP_ID","required","prop","_component_el_input","STEP_NAME","$event","STEP_CONTENTS","type","_hoisted_2","SEQ","_component_el_upload","fileList","action","$options","handlePictureCardPreview","handleRemove","_component_el_icon","_component_Plus","_component_el_dialog","dialogVisible","style","src","dialogImageUrl","alt","_hoisted_4","STEP_IMG_ID","_hoisted_5","UPDATE_USER","_component_el_button","onClick","submitForm","_cache","_ctx","$emit"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\FAComs\\NewStep.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-form label-position=\"left\" ref=\"ruleFormRef\" :model=\"stepModel\" label-width=\"120px\" class=\"demo-ruleForm\"\r\n            status-icon>\r\n            <el-form-item label=\"SOP ID\">\r\n                <span class=\"text-gray-500\">{{ stepModel.SOP_ID }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"Step Name\" required prop=\"STEP_NAME\">\r\n                <el-input v-model=\"stepModel.STEP_NAME\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Step Contents\" prop=\"STEP_CONTENTS\" required>\r\n                <el-input v-model=\"stepModel.STEP_CONTENTS\" type=\"textarea\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Sequence\" prop=\"SEQ\" required>\r\n                <span class=\"text-gray-500\">{{ stepModel.SEQ }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"Step Image\">\r\n                <el-upload v-model:file-list=\"fileList\" action=\"http://localhost:44354/api/upload\" list-type=\"picture-card\" :auto-upload=\"true\"\r\n                    :on-preview=\"handlePictureCardPreview\" :on-remove=\"handleRemove\">\r\n                    <el-icon>\r\n                        <Plus />\r\n                    </el-icon>\r\n                </el-upload>\r\n\r\n                <el-dialog v-model=\"dialogVisible\" style=\"width: fit-content;\">\r\n                    <img w-full :src=\"dialogImageUrl\" alt=\"Preview Image\" />\r\n                </el-dialog>\r\n\r\n            </el-form-item>\r\n            <el-form-item label=\"Image ID\"><span class=\"text-gray-500\">{{ stepModel.STEP_IMG_ID }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"Update User\">\r\n                <span class=\"text-gray-500\">{{ stepModel.UPDATE_USER }}</span>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm\">\r\n                    Submit\r\n                </el-button>\r\n                <el-button @click=\"$emit('CancelEvent')\">Cancel</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            disabled: false,\r\n            dialogVisible: false,\r\n            dialogImageUrl: '',\r\n            stepModel: {\r\n                SOP_ID: 0,\r\n                STEP_NAME: '',\r\n                STEP_CONTENTS: '',\r\n                SEQ: 0,\r\n                STEP_IMG_ID: 0,\r\n                UPDATE_TIME: new Date(),\r\n                UPDATE_USER: 0\r\n            },\r\n            fileList: undefined\r\n        }\r\n    }, props: {\r\n        AddNew: Boolean,\r\n        Data: Object\r\n    }, mounted() {\r\n        this.stepModel = {\r\n            SOP_ID: this.Data.sop.SOP_ID,\r\n            STEP_NAME: this.Data.step_name,\r\n            STEP_CONTENTS: '',\r\n            SEQ: this.Data.seq,\r\n            STEP_IMG_ID: 0,\r\n            UPDATE_TIME: new Date(),\r\n            UPDATE_USER: 10003367\r\n        }\r\n    },\r\n    methods: {\r\n        handlePictureCardPreview: function (uploadFile) {\r\n            this.dialogImageUrl = uploadFile.url;\r\n            this.dialogVisible = true;\r\n        },\r\n        handleRemove: function (file) {\r\n            console.log('File Remove: ' + file.url);\r\n            if (this.fileList && this.fileList.length > 0)\r\n                console.log('List File: ' + this.fileList[0].url);\r\n        }, async submitForm() {\r\n            if (!this.stepModel.STEP_NAME || !this.stepModel.STEP_CONTENTS) {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: \"The information has not been entered completely\",\r\n                });\r\n                return;\r\n            }\r\n            if (this.fileList.length < 1) {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: \"Step Image can't be null\",\r\n                });                \r\n                return;\r\n            }\r\n\r\n            const file = this.fileList[0];\r\n            console.log(file);\r\n            const formData = new FormData();\r\n            formData.append('file', file);\r\n\r\n            // await this.axios.post('api/FAOnlineSOP/UploadSopImage/user/10003367', formData, {\r\n            //     headers: {\r\n            //         'Content-Type': 'multipart/form-data'\r\n            //     }\r\n            // }).then((response) => {\r\n            //     this.stepModel.STEP_IMG_ID = response.data.img_id;\r\n\r\n            // }).catch((err) => {\r\n            //     // this.$message({\r\n            //     //     showClose: true,\r\n            //     //     type: \"error\",\r\n            //     //     message: err.response.data,\r\n            //     // });\r\n            //     console.log(err.response.data);\r\n            // });\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}