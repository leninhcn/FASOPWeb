{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  computed: {\n    ...mapGetters({\n      GetUser: \"getUser\"\n    })\n  },\n  data() {\n    return {\n      url: \"http://172.23.20.170:3001\",\n      socket: undefined,\n      connected: false,\n      messages: [],\n      message: \"\"\n    };\n  },\n  beforeUnmount() {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  },\n  mounted() {\n    this.InitSocket();\n  },\n  methods: {\n    InitSocket() {\n      this.socket = io(this.url);\n      this.socket.on(\"connect\", () => {\n        this.connected = true;\n      });\n      this.socket.on(\"disconnect\", () => {\n        this.connected = false;\n      });\n      this.socket.on(\"msgFromServer\", data => {\n        this.messages.push(`${data.sender}: ${data.content}`);\n        console.log(this.message);\n      });\n    },\n    sendMessage() {\n      const sent_msg = this.message;\n      this.message = \"\";\n      console.log(sent_msg);\n      setTimeout(() => {\n        this.socket.emit(\"sendMsg\", {\n          type: \"ownMsg\",\n          msg: {\n            content: sent_msg,\n            type: \"text\",\n            sender: this.GetUser.EMP_ID,\n            receiver: 4545454,\n            group_id: 2,\n            media_id: 0\n          }\n        });\n        this.$emit(\"MessageSent\", sent_msg);\n      }, 100);\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","computed","GetUser","data","url","socket","undefined","connected","messages","message","beforeUnmount","disconnect","mounted","InitSocket","methods","io","on","push","sender","content","console","log","sendMessage","sent_msg","setTimeout","emit","type","msg","EMP_ID","receiver","group_id","media_id","$emit"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\QMessage\\MsgSender.vue"],"sourcesContent":["<template>\r\n  <div\r\n    style=\"\r\n      width: 100%;\r\n      background-color: #bde9f2;\r\n      position: relative;\r\n      border-radius: 5px;\r\n    \"\r\n    :class=\"{ disabled: !connected }\"\r\n  >\r\n    <q-bar dense class=\"bg-teal text-white\">\r\n      <q-btn-group flat>\r\n        <q-btn square icon=\"sentiment_satisfied\" />\r\n        <q-btn square icon=\"content_cut\" />\r\n        <q-btn square icon=\"drive_folder_upload\" />\r\n        <q-btn square icon=\"edit_location\" />\r\n      </q-btn-group>\r\n      <q-space></q-space>\r\n      <q-btn-group flat>\r\n        <q-btn square icon=\"history\" />\r\n      </q-btn-group>\r\n    </q-bar>\r\n    <q-input\r\n      v-model=\"message\"\r\n      type=\"textarea\"\r\n      standout=\"bg-teal-2 text-white\"\r\n      input-style=\"height: 50px;\"\r\n      :disable=\"!connected\"\r\n      @keyup.enter=\"sendMessage\"\r\n    >\r\n    </q-input>\r\n    <q-btn\r\n      :disable=\"!connected\"\r\n      @click=\"sendMessage\"\r\n      size=\"20px\"\r\n      round\r\n      dense\r\n      flat\r\n      icon=\"send\"\r\n      style=\"position: absolute; bottom: 2px; right: 15px\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n  computed: {\r\n    ...mapGetters({\r\n      GetUser: \"getUser\",\r\n    }),\r\n  },\r\n  data() {\r\n    return {\r\n      url: \"http://172.23.20.170:3001\",\r\n      socket: undefined,\r\n      connected: false,\r\n      messages: [],\r\n      message: \"\",\r\n    };\r\n  },\r\n  beforeUnmount() {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.InitSocket();\r\n  },\r\n  methods: {\r\n    InitSocket() {\r\n      this.socket = io(this.url);\r\n      this.socket.on(\"connect\", () => {\r\n        this.connected = true;\r\n      });\r\n\r\n      this.socket.on(\"disconnect\", () => {\r\n        this.connected = false;\r\n      });\r\n\r\n      this.socket.on(\"msgFromServer\", (data) => {\r\n        this.messages.push(`${data.sender}: ${data.content}`);\r\n        console.log(this.message);\r\n      });\r\n    },\r\n    sendMessage() {\r\n      const sent_msg = this.message;\r\n      this.message = \"\";\r\n      console.log(sent_msg);\r\n      setTimeout(() => {\r\n        this.socket.emit(\"sendMsg\", {\r\n          type: \"ownMsg\",\r\n          msg: {\r\n            content: sent_msg,\r\n            type: \"text\",\r\n            sender: this.GetUser.EMP_ID,\r\n            receiver: 4545454,\r\n            group_id: 2,\r\n            media_id: 0,\r\n          },\r\n        });\r\n        this.$emit(\"MessageSent\", sent_msg);\r\n      }, 100);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"mappings":";AA6CA,SAASA,UAAS,QAAS,MAAM;AACjC,eAAe;EACbC,QAAQ,EAAE;IACR,GAAGD,UAAU,CAAC;MACZE,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,GAAG,EAAE,2BAA2B;MAChCC,MAAM,EAAEC,SAAS;MACjBC,SAAS,EAAE,KAAK;MAChBC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI,IAAI,CAACL,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACM,UAAU,EAAE;IAC1B;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,UAAU,EAAE;EACnB,CAAC;EACDC,OAAO,EAAE;IACPD,UAAUA,CAAA,EAAG;MACX,IAAI,CAACR,MAAK,GAAIU,EAAE,CAAC,IAAI,CAACX,GAAG,CAAC;MAC1B,IAAI,CAACC,MAAM,CAACW,EAAE,CAAC,SAAS,EAAE,MAAM;QAC9B,IAAI,CAACT,SAAQ,GAAI,IAAI;MACvB,CAAC,CAAC;MAEF,IAAI,CAACF,MAAM,CAACW,EAAE,CAAC,YAAY,EAAE,MAAM;QACjC,IAAI,CAACT,SAAQ,GAAI,KAAK;MACxB,CAAC,CAAC;MAEF,IAAI,CAACF,MAAM,CAACW,EAAE,CAAC,eAAe,EAAGb,IAAI,IAAK;QACxC,IAAI,CAACK,QAAQ,CAACS,IAAI,CAAE,GAAEd,IAAI,CAACe,MAAO,KAAIf,IAAI,CAACgB,OAAQ,EAAC,CAAC;QACrDC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACZ,OAAO,CAAC;MAC3B,CAAC,CAAC;IACJ,CAAC;IACDa,WAAWA,CAAA,EAAG;MACZ,MAAMC,QAAO,GAAI,IAAI,CAACd,OAAO;MAC7B,IAAI,CAACA,OAAM,GAAI,EAAE;MACjBW,OAAO,CAACC,GAAG,CAACE,QAAQ,CAAC;MACrBC,UAAU,CAAC,MAAM;QACf,IAAI,CAACnB,MAAM,CAACoB,IAAI,CAAC,SAAS,EAAE;UAC1BC,IAAI,EAAE,QAAQ;UACdC,GAAG,EAAE;YACHR,OAAO,EAAEI,QAAQ;YACjBG,IAAI,EAAE,MAAM;YACZR,MAAM,EAAE,IAAI,CAAChB,OAAO,CAAC0B,MAAM;YAC3BC,QAAQ,EAAE,OAAO;YACjBC,QAAQ,EAAE,CAAC;YACXC,QAAQ,EAAE;UACZ;QACF,CAAC,CAAC;QACF,IAAI,CAACC,KAAK,CAAC,aAAa,EAAET,QAAQ,CAAC;MACrC,CAAC,EAAE,GAAG,CAAC;IACT;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}