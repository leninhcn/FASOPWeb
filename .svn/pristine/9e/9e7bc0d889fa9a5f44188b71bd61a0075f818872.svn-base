{"ast":null,"code":"import { h, ref, computed, watch, onBeforeUnmount, getCurrentInstance, Transition } from 'vue';\nimport usePageSticky, { usePageStickyProps } from '../page-sticky/use-page-sticky.js';\nimport { getScrollTarget, setVerticalScrollPosition } from '../../utils/scroll.js';\nimport { createComponent } from '../../utils/private/create.js';\nexport default createComponent({\n  name: 'QPageScroller',\n  props: {\n    ...usePageStickyProps,\n    scrollOffset: {\n      type: Number,\n      default: 1000\n    },\n    reverse: Boolean,\n    duration: {\n      type: Number,\n      default: 300\n    },\n    offset: {\n      default: () => [18, 18]\n    }\n  },\n  emits: ['click'],\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const {\n      proxy: {\n        $q\n      }\n    } = getCurrentInstance();\n    const {\n      $layout,\n      getStickyContent\n    } = usePageSticky();\n    const rootRef = ref(null);\n    let heightWatcher;\n    const scrollHeight = computed(() => $layout.height.value - ($layout.isContainer.value === true ? $layout.containerHeight.value : $q.screen.height));\n    function isVisible() {\n      return props.reverse === true ? scrollHeight.value - $layout.scroll.value.position > props.scrollOffset : $layout.scroll.value.position > props.scrollOffset;\n    }\n    const showing = ref(isVisible());\n    function updateVisibility() {\n      const newVal = isVisible();\n      if (showing.value !== newVal) {\n        showing.value = newVal;\n      }\n    }\n    function updateReverse() {\n      if (props.reverse === true) {\n        if (heightWatcher === void 0) {\n          heightWatcher = watch(scrollHeight, updateVisibility);\n        }\n      } else {\n        cleanup();\n      }\n    }\n    watch($layout.scroll, updateVisibility);\n    watch(() => props.reverse, updateReverse);\n    function cleanup() {\n      if (heightWatcher !== void 0) {\n        heightWatcher();\n        heightWatcher = void 0;\n      }\n    }\n    function onClick(e) {\n      const target = getScrollTarget($layout.isContainer.value === true ? rootRef.value : $layout.rootRef.value);\n      setVerticalScrollPosition(target, props.reverse === true ? $layout.height.value : 0, props.duration);\n      emit('click', e);\n    }\n    function getContent() {\n      return showing.value === true ? h('div', {\n        ref: rootRef,\n        class: 'q-page-scroller',\n        onClick\n      }, getStickyContent(slots)) : null;\n    }\n    updateReverse();\n    onBeforeUnmount(cleanup);\n    return () => h(Transition, {\n      name: 'q-transition--fade'\n    }, getContent);\n  }\n});","map":{"version":3,"names":["h","ref","computed","watch","onBeforeUnmount","getCurrentInstance","Transition","usePageSticky","usePageStickyProps","getScrollTarget","setVerticalScrollPosition","createComponent","name","props","scrollOffset","type","Number","default","reverse","Boolean","duration","offset","emits","setup","slots","emit","proxy","$q","$layout","getStickyContent","rootRef","heightWatcher","scrollHeight","height","value","isContainer","containerHeight","screen","isVisible","scroll","position","showing","updateVisibility","newVal","updateReverse","cleanup","onClick","e","target","getContent","class"],"sources":["D:/LearnVueJS/Vue3/Projects/fa-sop-online/node_modules/quasar/src/components/page-scroller/QPageScroller.js"],"sourcesContent":["import { h, ref, computed, watch, onBeforeUnmount, getCurrentInstance, Transition } from 'vue'\n\nimport usePageSticky, { usePageStickyProps } from '../page-sticky/use-page-sticky.js'\nimport { getScrollTarget, setVerticalScrollPosition } from '../../utils/scroll.js'\n\nimport { createComponent } from '../../utils/private/create.js'\n\nexport default createComponent({\n  name: 'QPageScroller',\n\n  props: {\n    ...usePageStickyProps,\n\n    scrollOffset: {\n      type: Number,\n      default: 1000\n    },\n\n    reverse: Boolean,\n\n    duration: {\n      type: Number,\n      default: 300\n    },\n\n    offset: {\n      default: () => [ 18, 18 ]\n    }\n  },\n\n  emits: [ 'click' ],\n\n  setup (props, { slots, emit }) {\n    const { proxy: { $q } } = getCurrentInstance()\n    const { $layout, getStickyContent } = usePageSticky()\n    const rootRef = ref(null)\n\n    let heightWatcher\n\n    const scrollHeight = computed(() => $layout.height.value - (\n      $layout.isContainer.value === true\n        ? $layout.containerHeight.value\n        : $q.screen.height\n    ))\n\n    function isVisible () {\n      return props.reverse === true\n        ? scrollHeight.value - $layout.scroll.value.position > props.scrollOffset\n        : $layout.scroll.value.position > props.scrollOffset\n    }\n\n    const showing = ref(isVisible())\n\n    function updateVisibility () {\n      const newVal = isVisible()\n      if (showing.value !== newVal) {\n        showing.value = newVal\n      }\n    }\n\n    function updateReverse () {\n      if (props.reverse === true) {\n        if (heightWatcher === void 0) {\n          heightWatcher = watch(scrollHeight, updateVisibility)\n        }\n      }\n      else {\n        cleanup()\n      }\n    }\n\n    watch($layout.scroll, updateVisibility)\n    watch(() => props.reverse, updateReverse)\n\n    function cleanup () {\n      if (heightWatcher !== void 0) {\n        heightWatcher()\n        heightWatcher = void 0\n      }\n    }\n\n    function onClick (e) {\n      const target = getScrollTarget(\n        $layout.isContainer.value === true\n          ? rootRef.value\n          : $layout.rootRef.value\n      )\n\n      setVerticalScrollPosition(\n        target,\n        props.reverse === true ? $layout.height.value : 0,\n        props.duration\n      )\n\n      emit('click', e)\n    }\n\n    function getContent () {\n      return showing.value === true\n        ? h('div', {\n          ref: rootRef,\n          class: 'q-page-scroller',\n          onClick\n        }, getStickyContent(slots))\n        : null\n    }\n\n    updateReverse()\n\n    onBeforeUnmount(cleanup)\n\n    return () => h(\n      Transition,\n      { name: 'q-transition--fade' },\n      getContent\n    )\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}