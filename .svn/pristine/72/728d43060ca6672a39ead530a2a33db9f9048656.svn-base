{"ast":null,"code":"import { computed } from 'vue';\nimport { sortDate } from '../../utils/private/sort.js';\nimport { isNumber, isDate, isObject } from '../../utils/is.js';\nexport const useTableSortProps = {\n  sortMethod: Function,\n  binaryStateSort: Boolean,\n  columnSortOrder: {\n    type: String,\n    validator: v => v === 'ad' || v === 'da',\n    default: 'ad'\n  }\n};\nexport function useTableSort(props, computedPagination, colList, setPagination) {\n  const columnToSort = computed(() => {\n    const {\n      sortBy\n    } = computedPagination.value;\n    return sortBy ? colList.value.find(def => def.name === sortBy) || null : null;\n  });\n  const computedSortMethod = computed(() => props.sortMethod !== void 0 ? props.sortMethod : (data, sortBy, descending) => {\n    const col = colList.value.find(def => def.name === sortBy);\n    if (col === void 0 || col.field === void 0) {\n      return data;\n    }\n    const dir = descending === true ? -1 : 1,\n      val = typeof col.field === 'function' ? v => col.field(v) : v => v[col.field];\n    return data.sort((a, b) => {\n      let A = val(a),\n        B = val(b);\n      if (A === null || A === void 0) {\n        return -1 * dir;\n      }\n      if (B === null || B === void 0) {\n        return 1 * dir;\n      }\n      if (col.sort !== void 0) {\n        return col.sort(A, B, a, b) * dir;\n      }\n      if (isNumber(A) === true && isNumber(B) === true) {\n        return (A - B) * dir;\n      }\n      if (isDate(A) === true && isDate(B) === true) {\n        return sortDate(A, B) * dir;\n      }\n      if (typeof A === 'boolean' && typeof B === 'boolean') {\n        return (A - B) * dir;\n      }\n      [A, B] = [A, B].map(s => (s + '').toLocaleString().toLowerCase());\n      return A < B ? -1 * dir : A === B ? 0 : dir;\n    });\n  });\n  function sort(col /* String(col name) or Object(col definition) */) {\n    let sortOrder = props.columnSortOrder;\n    if (isObject(col) === true) {\n      if (col.sortOrder) {\n        sortOrder = col.sortOrder;\n      }\n      col = col.name;\n    } else {\n      const def = colList.value.find(def => def.name === col);\n      if (def !== void 0 && def.sortOrder) {\n        sortOrder = def.sortOrder;\n      }\n    }\n    let {\n      sortBy,\n      descending\n    } = computedPagination.value;\n    if (sortBy !== col) {\n      sortBy = col;\n      descending = sortOrder === 'da';\n    } else if (props.binaryStateSort === true) {\n      descending = !descending;\n    } else if (descending === true) {\n      if (sortOrder === 'ad') {\n        sortBy = null;\n      } else {\n        descending = false;\n      }\n    } else {\n      // ascending\n      if (sortOrder === 'ad') {\n        descending = true;\n      } else {\n        sortBy = null;\n      }\n    }\n    setPagination({\n      sortBy,\n      descending,\n      page: 1\n    });\n  }\n  return {\n    columnToSort,\n    computedSortMethod,\n    sort\n  };\n}","map":{"version":3,"names":["computed","sortDate","isNumber","isDate","isObject","useTableSortProps","sortMethod","Function","binaryStateSort","Boolean","columnSortOrder","type","String","validator","v","default","useTableSort","props","computedPagination","colList","setPagination","columnToSort","sortBy","value","find","def","name","computedSortMethod","data","descending","col","field","dir","val","sort","a","b","A","B","map","s","toLocaleString","toLowerCase","sortOrder","page"],"sources":["D:/LearnVueJS/Vue3/Projects/fa-sop-online/node_modules/quasar/src/components/table/table-sort.js"],"sourcesContent":["import { computed } from 'vue'\n\nimport { sortDate } from '../../utils/private/sort.js'\nimport { isNumber, isDate, isObject } from '../../utils/is.js'\n\nexport const useTableSortProps = {\n  sortMethod: Function,\n  binaryStateSort: Boolean,\n  columnSortOrder: {\n    type: String,\n    validator: v => v === 'ad' || v === 'da',\n    default: 'ad'\n  }\n}\n\nexport function useTableSort (props, computedPagination, colList, setPagination) {\n  const columnToSort = computed(() => {\n    const { sortBy } = computedPagination.value\n\n    return sortBy\n      ? colList.value.find(def => def.name === sortBy) || null\n      : null\n  })\n\n  const computedSortMethod = computed(() => (\n    props.sortMethod !== void 0\n      ? props.sortMethod\n      : (data, sortBy, descending) => {\n          const col = colList.value.find(def => def.name === sortBy)\n          if (col === void 0 || col.field === void 0) {\n            return data\n          }\n\n          const\n            dir = descending === true ? -1 : 1,\n            val = typeof col.field === 'function'\n              ? v => col.field(v)\n              : v => v[ col.field ]\n\n          return data.sort((a, b) => {\n            let\n              A = val(a),\n              B = val(b)\n\n            if (A === null || A === void 0) {\n              return -1 * dir\n            }\n            if (B === null || B === void 0) {\n              return 1 * dir\n            }\n            if (col.sort !== void 0) {\n              return col.sort(A, B, a, b) * dir\n            }\n            if (isNumber(A) === true && isNumber(B) === true) {\n              return (A - B) * dir\n            }\n            if (isDate(A) === true && isDate(B) === true) {\n              return sortDate(A, B) * dir\n            }\n            if (typeof A === 'boolean' && typeof B === 'boolean') {\n              return (A - B) * dir\n            }\n\n            [ A, B ] = [ A, B ].map(s => (s + '').toLocaleString().toLowerCase())\n\n            return A < B\n              ? -1 * dir\n              : (A === B ? 0 : dir)\n          })\n        }\n  ))\n\n  function sort (col /* String(col name) or Object(col definition) */) {\n    let sortOrder = props.columnSortOrder\n\n    if (isObject(col) === true) {\n      if (col.sortOrder) {\n        sortOrder = col.sortOrder\n      }\n\n      col = col.name\n    }\n    else {\n      const def = colList.value.find(def => def.name === col)\n      if (def !== void 0 && def.sortOrder) {\n        sortOrder = def.sortOrder\n      }\n    }\n\n    let { sortBy, descending } = computedPagination.value\n\n    if (sortBy !== col) {\n      sortBy = col\n      descending = sortOrder === 'da'\n    }\n    else if (props.binaryStateSort === true) {\n      descending = !descending\n    }\n    else if (descending === true) {\n      if (sortOrder === 'ad') {\n        sortBy = null\n      }\n      else {\n        descending = false\n      }\n    }\n    else { // ascending\n      if (sortOrder === 'ad') {\n        descending = true\n      }\n      else {\n        sortBy = null\n      }\n    }\n\n    setPagination({ sortBy, descending, page: 1 })\n  }\n\n  return {\n    columnToSort,\n    computedSortMethod,\n    sort\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}