{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport GetOption from \"./Datas/stationYield\";\nexport default {\n  data() {\n    return {\n      option: GetOption(),\n      myChart: undefined,\n      colors: [\"#1478eb\", \"green\", \"orange\", \"yellow\", \"red\", \"indigo\", \"purple\", \"#cccccc\"]\n    };\n  },\n  methods: {\n    DataUpdate(line) {\n      this.myChart.clear();\n      this.axios.post(\"api/FATPKanban/GetYieldDetail\", line).then(res => {\n        console.log(res.data.data);\n        const [sr, grp] = this.GetSeries(res.data.data);\n        if (sr.length > 0) {\n          this.option.series = sr;\n          this.option.graphic = grp;\n          this.myChart.setOption(this.option);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    GetSeries(data) {\n      const rs = [];\n      const grp = [];\n      const offset = data.length > 0 ? Math.floor(this.myChart.getWidth() / data.length) : 1;\n      var labelFromatter = {\n        normal: {\n          color: function (params) {\n            if (params.value >= 99) {\n              return \"#04B404\";\n            } else if (params.value >= 97.5) {\n              return \"#0080FF\";\n            } else if (params.value >= 96) {\n              return \"#FE9A2E\";\n            } else {\n              return \"#FE2E2E\";\n            }\n          },\n          label: {\n            formatter: function (params) {\n              return params.value + \"%\";\n            },\n            textStyle: {\n              baseline: \"top\"\n            },\n            color: \"auto\",\n            fontSize: 20,\n            position: \"center\"\n          }\n        }\n      };\n      var labelTop = {\n        normal: {\n          label: {\n            show: true,\n            position: \"center\",\n            formatter: \"{b}\",\n            textStyle: {\n              baseline: \"bottom\"\n            }\n          },\n          labelLine: {\n            show: false\n          }\n        }\n      };\n      var labelBottom = {\n        normal: {\n          color: \"#ccc\",\n          label: {\n            show: true,\n            textStyle: {\n              baseline: \"top\"\n            },\n            position: \"center\"\n          },\n          labelLine: {\n            show: false\n          }\n        },\n        emphasis: {\n          color: \"rgba(0,0,0,0)\"\n        }\n      };\n      for (let id = 0; id < data.length; id++) {\n        const el = data[id];\n        grp.push({\n          type: \"text\",\n          style: {\n            text: el.PROCESS_NAME,\n            x: id == 0 ? id * offset + 50 : id * offset + 40,\n            y: 260,\n            fill: \"#fff\",\n            font: \"20px verdana\"\n          }\n        });\n        rs.push({\n          type: \"pie\",\n          center: [id == 0 ? id * offset + 80 : id * offset + 60, \"50%\"],\n          radius: [45, 60],\n          x: \"0%\",\n          itemStyle: labelFromatter,\n          data: [{\n            name: \"pass\",\n            value: el.PERCENT,\n            itemStyle: labelTop,\n            label: {\n              show: true,\n              fontSize: 18\n            }\n          }, {\n            name: \"fail\",\n            value: 100 - el.PERCENT,\n            itemStyle: labelBottom,\n            label: {\n              show: false,\n              position: \"inside\"\n            }\n          }]\n        });\n      }\n      return [rs, grp];\n    }\n  },\n  mounted() {\n    var dom = document.getElementById(\"pie-chart\");\n    this.myChart = this.$Echart.init(dom, null, {\n      renderer: \"canvas\",\n      useDirtyRect: false\n    });\n    if (this.option && typeof this.option === \"object\") {\n      this.myChart.setOption(this.option);\n    }\n    window.addEventListener(\"resize\", this.myChart.resize);\n    this.DataUpdate({\n      PDLINE_ID: \"10001\",\n      DB: \"BU20\"\n    });\n  }\n};","map":{"version":3,"names":["GetOption","data","option","myChart","undefined","colors","methods","DataUpdate","line","clear","axios","post","then","res","console","log","sr","grp","GetSeries","length","series","graphic","setOption","catch","err","rs","offset","Math","floor","getWidth","labelFromatter","normal","color","params","value","label","formatter","textStyle","baseline","fontSize","position","labelTop","show","labelLine","labelBottom","emphasis","id","el","push","type","style","text","PROCESS_NAME","x","y","fill","font","center","radius","itemStyle","name","PERCENT","mounted","dom","document","getElementById","$Echart","init","renderer","useDirtyRect","window","addEventListener","resize","PDLINE_ID","DB"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\FATPkanban\\StationYield.vue"],"sourcesContent":["<template>\r\n  <div id=\"pie-chart\"></div>\r\n</template>\r\n  \r\n  <script>\r\nimport GetOption from \"./Datas/stationYield\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      option: GetOption(),\r\n      myChart: undefined,\r\n      colors: [\r\n        \"#1478eb\",\r\n        \"green\",\r\n        \"orange\",\r\n        \"yellow\",\r\n        \"red\",\r\n        \"indigo\",\r\n        \"purple\",\r\n        \"#cccccc\",\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    DataUpdate(line) {\r\n      this.myChart.clear();\r\n      this.axios\r\n        .post(\"api/FATPKanban/GetYieldDetail\", line)\r\n        .then((res) => {\r\n          console.log(res.data.data);\r\n          const [sr, grp] = this.GetSeries(res.data.data);\r\n          if (sr.length > 0) {\r\n            this.option.series = sr;\r\n            this.option.graphic = grp;\r\n            this.myChart.setOption(this.option);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    GetSeries(data) {\r\n      const rs = [];\r\n      const grp = [];\r\n      const offset =\r\n        data.length > 0 ? Math.floor(this.myChart.getWidth() / data.length) : 1;\r\n      var labelFromatter = {\r\n        normal: {\r\n          color: function (params) {\r\n            if (params.value >= 99) {\r\n              return \"#04B404\";\r\n            } else if (params.value >= 97.5) {\r\n              return \"#0080FF\";\r\n            } else if (params.value >= 96) {\r\n              return \"#FE9A2E\";\r\n            } else {\r\n              return \"#FE2E2E\";\r\n            }\r\n          },\r\n          label: {\r\n            formatter: function (params) {\r\n              return params.value + \"%\";\r\n            },\r\n            textStyle: {\r\n              baseline: \"top\",\r\n            },\r\n            color: \"auto\",\r\n            fontSize: 20,\r\n            position: \"center\",\r\n          },\r\n        },\r\n      };\r\n      var labelTop = {\r\n        normal: {\r\n          label: {\r\n            show: true,\r\n            position: \"center\",\r\n            formatter: \"{b}\",\r\n            textStyle: {\r\n              baseline: \"bottom\",\r\n            },\r\n          },\r\n\r\n          labelLine: {\r\n            show: false,\r\n          },\r\n        },\r\n      };\r\n      var labelBottom = {\r\n        normal: {\r\n          color: \"#ccc\",\r\n          label: {\r\n            show: true,\r\n            textStyle: {\r\n              baseline: \"top\",\r\n            },\r\n            position: \"center\",\r\n          },\r\n          labelLine: {\r\n            show: false,\r\n          },\r\n        },\r\n        emphasis: {\r\n          color: \"rgba(0,0,0,0)\",\r\n        },\r\n      };\r\n      for (let id = 0; id < data.length; id++) {\r\n        const el = data[id];\r\n        grp.push({\r\n          type: \"text\",\r\n          style: {\r\n            text: el.PROCESS_NAME,\r\n            x: id == 0 ? id * offset + 50 : id * offset + 40,\r\n            y: 260,\r\n            fill: \"#fff\",\r\n            font: \"20px verdana\",\r\n          },\r\n        });\r\n        rs.push({\r\n          type: \"pie\",\r\n          center: [id == 0 ? id * offset + 80 : id * offset + 60, \"50%\"],\r\n          radius: [45, 60],\r\n          x: \"0%\",\r\n          itemStyle: labelFromatter,\r\n          data: [\r\n            {\r\n              name: \"pass\",\r\n              value: el.PERCENT,\r\n              itemStyle: labelTop,\r\n              label: { show: true, fontSize: 18 },\r\n            },\r\n            {\r\n              name: \"fail\",\r\n              value: 100 - el.PERCENT,\r\n              itemStyle: labelBottom,\r\n              label: { show: false, position: \"inside\" },\r\n            },\r\n          ],\r\n        });\r\n      }\r\n      return [rs, grp];\r\n    },\r\n  },\r\n  mounted() {\r\n    var dom = document.getElementById(\"pie-chart\");\r\n    this.myChart = this.$Echart.init(dom, null, {\r\n      renderer: \"canvas\",\r\n      useDirtyRect: false,\r\n    });\r\n\r\n    if (this.option && typeof this.option === \"object\") {\r\n      this.myChart.setOption(this.option);\r\n    }\r\n\r\n    window.addEventListener(\"resize\", this.myChart.resize);\r\n    this.DataUpdate({ PDLINE_ID: \"10001\", DB: \"BU20\" });\r\n  },\r\n};\r\n</script>\r\n  \r\n  <style lang=\"scss\" scoped>\r\n#pie-chart {\r\n  height: 40vh;\r\n  width: 100%;\r\n  overflow: hidden;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}