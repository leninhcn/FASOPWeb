{"ast":null,"code":"import { mapActions, mapGetters, mapMutations } from \"vuex\";\nimport newstep from './NewStep.vue';\nexport default {\n  components: {\n    newstep\n  },\n  computed: {\n    ...mapGetters({\n      sop_list: 'getSOPList',\n      sop_stt: 'getSOPstatus'\n    })\n  },\n  mounted() {\n    this.GetSOPErrorCode('getallsop').then(() => {\n      this.TempData = this.sop_list;\n      // console.log(this.TempData);\n    }).catch(err => {\n      console.log(err.response.data);\n    });\n  },\n  data() {\n    return {\n      ShowNewStep: false,\n      currentPage: 4,\n      pageSize: 100,\n      opMode: 'SOP Edit',\n      search: '',\n      TempData: [],\n      ShowEdit: false,\n      edittingSOP: {\n        sopName: '',\n        sopID: 0,\n        defect_code: '',\n        desc: '',\n        update_user: '10003367'\n      },\n      lstErrorCodes: ['ER01', 'ER02', 'ER03', 'ER04']\n    };\n  },\n  methods: {\n    ...mapActions(['GetSOPErrorCode']),\n    ...mapMutations(['UpdateSOP']),\n    filterTableData: function () {\n      this.TempData = this.sop_list.filter(data => !this.search || data.SOP_NAME.toLowerCase().includes(this.search.toLowerCase()));\n    },\n    handleEdit(index, row) {\n      this.opMode = 'SOP Edit';\n      this.edittingSOP.sopName = row.SOP_NAME;\n      this.edittingSOP.sopID = row.SOP_ID;\n      this.edittingSOP.defect_code = row.DEFECT_CODE;\n      this.edittingSOP.desc = row.DESCRIPTIONS;\n      this.ShowEdit = true;\n    },\n    handleNewStep(index, row) {\n      console.log(row);\n      this.ShowNewStep = true;\n    },\n    AddNewSOP() {\n      this.edittingSOP = {\n        sopName: '',\n        sopID: 0,\n        defect_code: '',\n        desc: '',\n        update_user: '10003367'\n      };\n      this.opMode = 'Add New SOP';\n      this.ShowEdit = true;\n    },\n    async submitForm() {\n      await this.axios.post(\"\", this.edittingSOP).then(response => {\n        console.log(response);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapActions","mapGetters","mapMutations","newstep","components","computed","sop_list","sop_stt","mounted","GetSOPErrorCode","then","TempData","catch","err","console","log","response","data","ShowNewStep","currentPage","pageSize","opMode","search","ShowEdit","edittingSOP","sopName","sopID","defect_code","desc","update_user","lstErrorCodes","methods","filterTableData","filter","SOP_NAME","toLowerCase","includes","handleEdit","index","row","SOP_ID","DEFECT_CODE","DESCRIPTIONS","handleNewStep","AddNewSOP","submitForm","axios","post"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\FAComs\\SopManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"mainDiv\">\r\n        <el-main>\r\n            <el-table :data=\"TempData\" style=\"width: 100%\">\r\n                <el-table-column label=\"SOP_NAME\" prop=\"SOP_NAME\" />\r\n                <el-table-column label=\"DEFECT_CODE\" prop=\"DEFECT_CODE\" />\r\n                <el-table-column label=\"DESCRIPTIONS\" prop=\"DESCRIPTIONS\" />\r\n                <el-table-column label=\"UPDATE_TIME\" prop=\"UPDATE_TIME\" />\r\n                <el-table-column label=\"UPDATE_USER\" prop=\"UPDATE_USER\" />\r\n                <el-table-column align=\"right\">\r\n                    <template #header>\r\n                        <div style=\"display: flex;\">\r\n                            <el-input style=\"flex: 1;margin-right: 5px;\" v-model=\"search\" @change=\"filterTableData\"\r\n                                size=\"small\" placeholder=\"Type to search\" />\r\n                            <el-button size=\"small\" @click=\"AddNewSOP\" type=\"primary\">Add New</el-button>\r\n                        </div>\r\n                    </template>\r\n                    <template #default=\"scope\">\r\n                        <el-button title=\"Edit\" type=\"primary\" size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\"><i\r\n                                class=\"icofont-edit\"></i></el-button>\r\n                        <el-button title=\"Add New Step\" type=\"primary\" size=\"small\"\r\n                            @click=\"handleNewStep(scope.$index, scope.row)\"><i class=\"icofont-sub-listing\"></i></el-button>\r\n                        <el-button title=\"Delete\" size=\"small\" type=\"danger\"\r\n                            @click=\"handleDelete(scope.$index, scope.row)\"><i class=\"icofont-ui-delete\"></i></el-button>\r\n\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-main>\r\n        <el-footer>\r\n            <el-pagination v-model:current-page=\"currentPage\" v-model:page-size=\"pageSize\"\r\n                :page-sizes=\"[100, 200, 300, 400]\" :small=\"small\" :disabled=\"disabled\" :background=\"background\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\" :total=\"400\" @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\" />\r\n        </el-footer>\r\n        <el-dialog v-model=\"ShowEdit\" :title=\"opMode\">\r\n            <el-form label-position=\"left\" ref=\"ruleFormRef\" :model=\"edittingSOP\" label-width=\"120px\" class=\"demo-ruleForm\"\r\n                status-icon>\r\n                <el-form-item label=\"SOP Name\" required prop=\"sopName\">\r\n                    <el-input v-model=\"edittingSOP.sopName\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"SOP ID\">\r\n                    <span class=\"text-gray-500\">{{ edittingSOP.sopID }}</span>\r\n                </el-form-item>\r\n                <el-form-item label=\"Error Code\" prop=\"defect_code\" required>\r\n                    <el-input v-model=\"edittingSOP.defect_code\" :autocomplete=\"lstErrorCodes\"\r\n                        suffix-icon=\"el-icon-loading\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"Descriptions\" prop=\"desc\" required>\r\n                    <el-input v-model=\"edittingSOP.desc\" type=\"textarea\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"Update User\">\r\n                    <span class=\"text-gray-500\">{{ edittingSOP.update_user }}</span>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\">\r\n                        Submit\r\n                    </el-button>\r\n                    <el-button @click=\"ShowEdit = false\">Cancel</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n        <el-dialog v-model=\"ShowNewStep\" title=\"New Step\">\r\n            <newstep v-if=\"ShowNewStep\" @CancelEvent=\"ShowNewStep = false\"></newstep>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    mapActions,\r\n    mapGetters,\r\n    mapMutations\r\n} from \"vuex\";\r\nimport newstep from './NewStep.vue'\r\nexport default {\r\n    components: {\r\n        newstep\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            sop_list: 'getSOPList',\r\n            sop_stt: 'getSOPstatus'\r\n        })\r\n    },\r\n    mounted() {\r\n        this.GetSOPErrorCode('getallsop').then(() => {\r\n            this.TempData = this.sop_list;\r\n            // console.log(this.TempData);\r\n        }).catch(err => {\r\n            console.log(err.response.data);\r\n        });\r\n    },\r\n    data() {\r\n        return {\r\n            ShowNewStep: false,\r\n            currentPage: 4,\r\n            pageSize: 100,\r\n            opMode: 'SOP Edit',\r\n            search: '',\r\n            TempData: [],\r\n            ShowEdit: false,\r\n            edittingSOP: {\r\n                sopName: '',\r\n                sopID: 0,\r\n                defect_code: '',\r\n                desc: '',\r\n                update_user: '10003367'\r\n            },\r\n            lstErrorCodes: ['ER01', 'ER02', 'ER03', 'ER04']\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['GetSOPErrorCode']),\r\n        ...mapMutations(['UpdateSOP']),\r\n        filterTableData: function () {\r\n            this.TempData = this.sop_list.filter(\r\n                (data) =>\r\n                    !this.search ||\r\n                    data.SOP_NAME.toLowerCase().includes(this.search.toLowerCase())\r\n            )\r\n        },\r\n        handleEdit(index, row) {\r\n            this.opMode = 'SOP Edit';\r\n            this.edittingSOP.sopName = row.SOP_NAME;\r\n            this.edittingSOP.sopID = row.SOP_ID;\r\n            this.edittingSOP.defect_code = row.DEFECT_CODE;\r\n            this.edittingSOP.desc = row.DESCRIPTIONS;\r\n            this.ShowEdit = true;\r\n        },\r\n        handleNewStep(index, row) {\r\n            console.log(row);\r\n            this.ShowNewStep = true;\r\n        },\r\n        AddNewSOP() {\r\n            this.edittingSOP = {\r\n                sopName: '',\r\n                sopID: 0,\r\n                defect_code: '',\r\n                desc: '',\r\n                update_user: '10003367'\r\n            };\r\n            this.opMode = 'Add New SOP';\r\n            this.ShowEdit = true;\r\n        },\r\n        async submitForm() {\r\n            await this.axios.post(\"\", this.edittingSOP).then((response) => {\r\n                console.log(response);\r\n            }).catch((err) => {\r\n                console.log(err)\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.mainDiv {\r\n    height: 89vh;\r\n    background-color: #ffffff;\r\n}\r\n\r\n.el-popper.is-customized {\r\n    /* Set padding to ensure the height is 32px */\r\n    padding: 6px 12px;\r\n    background: linear-gradient(90deg, rgb(159, 229, 151), rgb(204, 229, 129));\r\n}\r\n\r\n.el-popper.is-customized .el-popper__arrow::before {\r\n    background: linear-gradient(45deg, #b2e68d, #bce689);\r\n    right: 0;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}