{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  props: {\n    ParentName: String\n  },\n  mounted() {\n    this.GetMenuParrent();\n  },\n  data() {\n    return {\n      Roles: Array.from({\n        length: 10\n      }).map((_, idx) => ({\n        value: `${idx + 1}`,\n        label: `${idx + 1}`\n      })),\n      Types: [{\n        value: 'MENU_ITEM',\n        label: 'MENU_ITEM'\n      }, {\n        value: 'MENU_GROUP_ITEM',\n        label: 'MENU_GROUP_ITEM'\n      }, {\n        value: 'SUB_MENU',\n        label: 'SUB_MENU'\n      }],\n      Parents: [],\n      ruleForm: {\n        NAME: '',\n        DESCRIPTION: '',\n        TYPE: undefined,\n        PARENT_ID: undefined,\n        SEQ: 1,\n        TITLE: '',\n        LINK_TO: '',\n        DISPLAY_STATUS: 'ENABLE',\n        ENABLE: 'Y',\n        UPDATE_TIME: new Date(),\n        ITEM_LEVEL: 1,\n        UPDATE_USER_ID: 0,\n        ID: 0,\n        ROLE_REQUIRE: 2\n      },\n      rules: {\n        NAME: [{\n          required: true,\n          message: 'Please input Menu name',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          max: 100,\n          message: 'Length should be 5 to 100',\n          trigger: 'blur'\n        }],\n        LINK_TO: [{\n          required: true,\n          message: 'Please input router',\n          trigger: 'blur'\n        }],\n        DESCRIPTION: [{\n          required: true,\n          message: 'Please input Menu Description',\n          trigger: 'blur'\n        }],\n        PARENT_ID: [{\n          required: true,\n          message: 'Please select Menu Parrent',\n          trigger: 'change'\n        }],\n        TYPE: [{\n          required: true,\n          message: 'Please select Menu Type',\n          trigger: 'change'\n        }],\n        TITLE: [{\n          required: true,\n          message: 'Please input title',\n          trigger: 'blur'\n        }],\n        ROLE_REQUIRE: [{\n          required: true,\n          message: 'Please select Role Require',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  methods: {\n    async submitForm() {\n      if (!this.$refs.ruleFormRef) return;\n      await this.$refs.ruleFormRef.validate(valid => {\n        if (valid) {\n          this.axios.post('api/FAOnlineSOP/AddNewMenu', this.ruleForm).then(res => {\n            this.$message({\n              showClose: true,\n              type: \"success\",\n              message: res.data\n            });\n          }).catch(err => {\n            this.$message({\n              showClose: true,\n              type: \"error\",\n              message: err.response.data\n            });\n          });\n        } else {\n          this.$message({\n            showClose: true,\n            type: \"error\",\n            message: 'All fields has not complete input'\n          });\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.ruleFormRef.resetFields();\n    },\n    async GetMenuParrent() {\n      await this.axios.get('api/FAOnlineSOP/GetAllParrent').then(res => {\n        res.data.forEach(element => {\n          this.Parents.push({\n            value: element.ID,\n            label: element.NAME\n          });\n        });\n        this.Parents.forEach(el => {\n          if (this.ParentName && el.label.includes(this.ParentName)) {\n            this.ruleForm.PARENT_ID = el.value;\n            this.SelectSeq(this.ruleForm.PARENT_ID);\n          }\n        });\n      }).catch(err => {\n        this.$message({\n          showClose: true,\n          type: \"error\",\n          message: err.response.data\n        });\n      });\n    },\n    SelectLevel(value) {\n      switch (value) {\n        case 'MENU_ITEM':\n          this.ruleForm.ITEM_LEVEL = 3;\n          break;\n        case 'MENU_GROUP_ITEM':\n          this.ruleForm.ITEM_LEVEL = 2;\n          break;\n        case 'SUB_MENU':\n          this.ruleForm.ITEM_LEVEL = 1;\n          break;\n        default:\n          break;\n      }\n    },\n    SelectSeq(op) {\n      this.Parents.forEach(async el => {\n        if (el.value == op) {\n          await this.axios.get(`api/FAOnlineSOP/GetMaxSEQ?parentName=${el.label}`).then(res => {\n            this.ruleForm.SEQ = res.data.MAX_SEQ;\n          }).catch(err => {\n            this.$message({\n              showClose: true,\n              type: \"error\",\n              message: err.response.data\n            });\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["props","ParentName","String","mounted","GetMenuParrent","data","Roles","Array","from","length","map","_","idx","value","label","Types","Parents","ruleForm","NAME","DESCRIPTION","TYPE","undefined","PARENT_ID","SEQ","TITLE","LINK_TO","DISPLAY_STATUS","ENABLE","UPDATE_TIME","Date","ITEM_LEVEL","UPDATE_USER_ID","ID","ROLE_REQUIRE","rules","required","message","trigger","min","max","methods","submitForm","$refs","ruleFormRef","validate","valid","axios","post","then","res","$message","showClose","type","catch","err","response","resetForm","resetFields","get","forEach","element","push","el","includes","SelectSeq","SelectLevel","op","MAX_SEQ"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\AdminArea\\MenuEdit.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-form ref=\"ruleFormRef\" :model=\"ruleForm\" :rules=\"rules\" label-width=\"auto\" class=\"demo-ruleForm\" size=\"default\"\r\n            status-icon label-position=\"left\">\r\n            <el-form-item label=\"Menu name\" prop=\"NAME\">\r\n                <el-input v-model=\"ruleForm.NAME\" placeholder=\"Menu Name\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Link To Route\" prop=\"LINK_TO\">\r\n                <el-input v-model=\"ruleForm.LINK_TO\" placeholder=\"Link To Route\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Menu Title\" prop=\"TITLE\" required>\r\n                <el-input v-model=\"ruleForm.TITLE\" placeholder=\"Menu Title\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Menu Description\" prop=\"DESCRIPTION\" required>\r\n                <el-input v-model=\"ruleForm.DESCRIPTION\" type=\"textarea\" placeholder=\"Menu Description\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"Menu Type\" prop=\"TYPE\" required>\r\n                <el-col :span=\"11\">\r\n                    <el-form-item prop=\"TYPE\" required>\r\n                        <el-select-v2 v-model=\"ruleForm.TYPE\" placeholder=\"Menu Type\" :options=\"Types\"\r\n                            @change=\"SelectLevel\" />\r\n                        <span style=\"margin-left: 5px\">Level: {{ ruleForm.ITEM_LEVEL }}</span>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"13\">\r\n                    <el-form-item label=\"Menu Parent\" prop=\"PARENT_ID\" required>\r\n                        <el-select-v2 v-model=\"ruleForm.PARENT_ID\" placeholder=\"Menu Parent\" :options=\"Parents\"\r\n                            @change=\"SelectSeq\" />\r\n                        <span style=\"margin-left: 5px; \">SEQ: {{ ruleForm.SEQ }}</span>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"Menu Type\" prop=\"TYPE\" required>\r\n                <el-form-item prop=\"ROLE_REQUIRE\" required>\r\n                    <el-select-v2 v-model=\"ruleForm.ROLE_REQUIRE\" placeholder=\"Role Require\" :options=\"Roles\" />\r\n                </el-form-item>\r\n            </el-form-item>\r\n            <el-form-item label=\"Display Status\" prop=\"DISPLAY_STATUS\">\r\n                <el-radio-group v-model=\"ruleForm.DISPLAY_STATUS\">\r\n                    <el-radio label=\"ENABLE\" />\r\n                    <el-radio label=\"DISABLE\" />\r\n                </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item style=\"padding-left: 130px;\">\r\n                <el-button type=\"primary\" @click=\"submitForm()\">\r\n                    Create\r\n                </el-button>\r\n                <el-button @click=\"resetForm()\">Reset</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    props: {\r\n        ParentName: String\r\n    },\r\n    mounted() {\r\n        this.GetMenuParrent();\r\n    },\r\n    data() {\r\n        return {\r\n            Roles: Array.from({ length: 10 }).map((_, idx) => ({\r\n                value: `${idx + 1}`,\r\n                label: `${idx + 1}`,\r\n            })),\r\n            Types: [\r\n                {\r\n                    value: 'MENU_ITEM',\r\n                    label: 'MENU_ITEM'\r\n                },\r\n                {\r\n                    value: 'MENU_GROUP_ITEM',\r\n                    label: 'MENU_GROUP_ITEM'\r\n                },\r\n                {\r\n                    value: 'SUB_MENU',\r\n                    label: 'SUB_MENU'\r\n                }\r\n            ],\r\n            Parents: [],\r\n            ruleForm: {\r\n                NAME: '',\r\n                DESCRIPTION: '',\r\n                TYPE: undefined,\r\n                PARENT_ID: undefined,\r\n                SEQ: 1,\r\n                TITLE: '',\r\n                LINK_TO: '',\r\n                DISPLAY_STATUS: 'ENABLE',\r\n                ENABLE: 'Y',\r\n                UPDATE_TIME: new Date(),\r\n                ITEM_LEVEL: 1,\r\n                UPDATE_USER_ID: 0,\r\n                ID: 0,\r\n                ROLE_REQUIRE: 2\r\n            },\r\n            rules: {\r\n                NAME: [\r\n                    { required: true, message: 'Please input Menu name', trigger: 'blur' },\r\n                    { min: 5, max: 100, message: 'Length should be 5 to 100', trigger: 'blur' },\r\n                ],\r\n                LINK_TO: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input router',\r\n                        trigger: 'blur',\r\n                    },\r\n                ],\r\n                DESCRIPTION: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input Menu Description',\r\n                        trigger: 'blur',\r\n                    },\r\n                ],\r\n                PARENT_ID: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Please select Menu Parrent',\r\n                        trigger: 'change',\r\n                    },\r\n                ],\r\n                TYPE: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Please select Menu Type',\r\n                        trigger: 'change',\r\n                    },\r\n                ],\r\n                TITLE: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input title',\r\n                        trigger: 'blur',\r\n                    },\r\n                ],\r\n                ROLE_REQUIRE: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Please select Role Require',\r\n                        trigger: 'change',\r\n                    },\r\n                ]\r\n            }\r\n        }\r\n    }, methods: {\r\n        async submitForm() {\r\n            if (!this.$refs.ruleFormRef) return\r\n            await this.$refs.ruleFormRef.validate((valid) => {\r\n                if (valid) {\r\n                    this.axios.post('api/FAOnlineSOP/AddNewMenu', this.ruleForm).then((res) => {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            type: \"success\",\r\n                            message: res.data,\r\n                        });\r\n                    }).catch((err) => {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            type: \"error\",\r\n                            message: err.response.data,\r\n                        });\r\n                    });\r\n                } else {\r\n                    this.$message({\r\n                            showClose: true,\r\n                            type: \"error\",\r\n                            message: 'All fields has not complete input',\r\n                        });\r\n                }\r\n            })\r\n        },\r\n        resetForm() {\r\n            this.$refs.ruleFormRef.resetFields()\r\n        }, async GetMenuParrent() {\r\n            await this.axios.get('api/FAOnlineSOP/GetAllParrent').then((res) => {\r\n                res.data.forEach(element => {\r\n                    this.Parents.push({\r\n                        value: element.ID,\r\n                        label: element.NAME\r\n                    })\r\n                });\r\n                this.Parents.forEach((el) => {\r\n                    if (this.ParentName && el.label.includes(this.ParentName)) {\r\n                        this.ruleForm.PARENT_ID = el.value;\r\n                        this.SelectSeq(this.ruleForm.PARENT_ID);\r\n                    }\r\n                })\r\n            }).catch((err) => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: err.response.data,\r\n                });\r\n            })\r\n        },\r\n        SelectLevel(value) {\r\n            switch (value) {\r\n                case 'MENU_ITEM':\r\n                    this.ruleForm.ITEM_LEVEL = 3;\r\n                    break;\r\n                case 'MENU_GROUP_ITEM':\r\n                    this.ruleForm.ITEM_LEVEL = 2;\r\n                    break;\r\n                case 'SUB_MENU':\r\n                    this.ruleForm.ITEM_LEVEL = 1;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n        SelectSeq(op) {\r\n            this.Parents.forEach(async (el) => {\r\n                if (el.value == op) {\r\n                    await this.axios.get(`api/FAOnlineSOP/GetMaxSEQ?parentName=${el.label}`).then((res) => {\r\n                        this.ruleForm.SEQ = res.data.MAX_SEQ;\r\n                    }).catch((err) => {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            type: \"error\",\r\n                            message: err.response.data,\r\n                        });\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.MainBox {\r\n    background-color: #ffffff;\r\n    box-shadow: 20px 20px 30px rgba(0, 0, 0, .4),\r\n        40px 40px 60px rgba(0, 0, 0, .4);\r\n\r\n    padding: {\r\n        top: 10px;\r\n        bottom: 10px;\r\n        right: 10px;\r\n    }\r\n}\r\n</style>"],"mappings":";AAuDA,eAAe;EACXA,KAAK,EAAE;IACHC,UAAU,EAAEC;EAChB,CAAC;EACDC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,cAAc,EAAE;EACzB,CAAC;EACDC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAEC,KAAK,CAACC,IAAI,CAAC;QAAEC,MAAM,EAAE;MAAG,CAAC,CAAC,CAACC,GAAG,CAAC,CAACC,CAAC,EAAEC,GAAG,MAAM;QAC/CC,KAAK,EAAG,GAAED,GAAE,GAAI,CAAE,EAAC;QACnBE,KAAK,EAAG,GAAEF,GAAE,GAAI,CAAE;MACtB,CAAC,CAAC,CAAC;MACHG,KAAK,EAAE,CACH;QACIF,KAAK,EAAE,WAAW;QAClBC,KAAK,EAAE;MACX,CAAC,EACD;QACID,KAAK,EAAE,iBAAiB;QACxBC,KAAK,EAAE;MACX,CAAC,EACD;QACID,KAAK,EAAE,UAAU;QACjBC,KAAK,EAAE;MACX,EACH;MACDE,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE;QACNC,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,IAAI,EAAEC,SAAS;QACfC,SAAS,EAAED,SAAS;QACpBE,GAAG,EAAE,CAAC;QACNC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE,EAAE;QACXC,cAAc,EAAE,QAAQ;QACxBC,MAAM,EAAE,GAAG;QACXC,WAAW,EAAE,IAAIC,IAAI,EAAE;QACvBC,UAAU,EAAE,CAAC;QACbC,cAAc,EAAE,CAAC;QACjBC,EAAE,EAAE,CAAC;QACLC,YAAY,EAAE;MAClB,CAAC;MACDC,KAAK,EAAE;QACHhB,IAAI,EAAE,CACF;UAAEiB,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,wBAAwB;UAAEC,OAAO,EAAE;QAAO,CAAC,EACtE;UAAEC,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE,GAAG;UAAEH,OAAO,EAAE,2BAA2B;UAAEC,OAAO,EAAE;QAAO,CAAC,CAC9E;QACDZ,OAAO,EAAE,CACL;UACIU,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,qBAAqB;UAC9BC,OAAO,EAAE;QACb,CAAC,CACJ;QACDlB,WAAW,EAAE,CACT;UACIgB,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,+BAA+B;UACxCC,OAAO,EAAE;QACb,CAAC,CACJ;QACDf,SAAS,EAAE,CACP;UACIa,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,4BAA4B;UACrCC,OAAO,EAAE;QACb,CAAC,CACJ;QACDjB,IAAI,EAAE,CACF;UACIe,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,yBAAyB;UAClCC,OAAO,EAAE;QACb,CAAC,CACJ;QACDb,KAAK,EAAE,CACH;UACIW,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,oBAAoB;UAC7BC,OAAO,EAAE;QACb,CAAC,CACJ;QACDJ,YAAY,EAAE,CACV;UACIE,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,4BAA4B;UACrCC,OAAO,EAAE;QACb,CAAC;MAET;IACJ;EACJ,CAAC;EAAEG,OAAO,EAAE;IACR,MAAMC,UAAUA,CAAA,EAAG;MACf,IAAI,CAAC,IAAI,CAACC,KAAK,CAACC,WAAW,EAAE;MAC7B,MAAM,IAAI,CAACD,KAAK,CAACC,WAAW,CAACC,QAAQ,CAAEC,KAAK,IAAK;QAC7C,IAAIA,KAAK,EAAE;UACP,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,4BAA4B,EAAE,IAAI,CAAC9B,QAAQ,CAAC,CAAC+B,IAAI,CAAEC,GAAG,IAAK;YACvE,IAAI,CAACC,QAAQ,CAAC;cACVC,SAAS,EAAE,IAAI;cACfC,IAAI,EAAE,SAAS;cACfhB,OAAO,EAAEa,GAAG,CAAC5C;YACjB,CAAC,CAAC;UACN,CAAC,CAAC,CAACgD,KAAK,CAAEC,GAAG,IAAK;YACd,IAAI,CAACJ,QAAQ,CAAC;cACVC,SAAS,EAAE,IAAI;cACfC,IAAI,EAAE,OAAO;cACbhB,OAAO,EAAEkB,GAAG,CAACC,QAAQ,CAAClD;YAC1B,CAAC,CAAC;UACN,CAAC,CAAC;QACN,OAAO;UACH,IAAI,CAAC6C,QAAQ,CAAC;YACNC,SAAS,EAAE,IAAI;YACfC,IAAI,EAAE,OAAO;YACbhB,OAAO,EAAE;UACb,CAAC,CAAC;QACV;MACJ,CAAC;IACL,CAAC;IACDoB,SAASA,CAAA,EAAG;MACR,IAAI,CAACd,KAAK,CAACC,WAAW,CAACc,WAAW,EAAC;IACvC,CAAC;IAAE,MAAMrD,cAAcA,CAAA,EAAG;MACtB,MAAM,IAAI,CAAC0C,KAAK,CAACY,GAAG,CAAC,+BAA+B,CAAC,CAACV,IAAI,CAAEC,GAAG,IAAK;QAChEA,GAAG,CAAC5C,IAAI,CAACsD,OAAO,CAACC,OAAM,IAAK;UACxB,IAAI,CAAC5C,OAAO,CAAC6C,IAAI,CAAC;YACdhD,KAAK,EAAE+C,OAAO,CAAC5B,EAAE;YACjBlB,KAAK,EAAE8C,OAAO,CAAC1C;UACnB,CAAC;QACL,CAAC,CAAC;QACF,IAAI,CAACF,OAAO,CAAC2C,OAAO,CAAEG,EAAE,IAAK;UACzB,IAAI,IAAI,CAAC7D,UAAS,IAAK6D,EAAE,CAAChD,KAAK,CAACiD,QAAQ,CAAC,IAAI,CAAC9D,UAAU,CAAC,EAAE;YACvD,IAAI,CAACgB,QAAQ,CAACK,SAAQ,GAAIwC,EAAE,CAACjD,KAAK;YAClC,IAAI,CAACmD,SAAS,CAAC,IAAI,CAAC/C,QAAQ,CAACK,SAAS,CAAC;UAC3C;QACJ,CAAC;MACL,CAAC,CAAC,CAAC+B,KAAK,CAAEC,GAAG,IAAK;QACd,IAAI,CAACJ,QAAQ,CAAC;UACVC,SAAS,EAAE,IAAI;UACfC,IAAI,EAAE,OAAO;UACbhB,OAAO,EAAEkB,GAAG,CAACC,QAAQ,CAAClD;QAC1B,CAAC,CAAC;MACN,CAAC;IACL,CAAC;IACD4D,WAAWA,CAACpD,KAAK,EAAE;MACf,QAAQA,KAAK;QACT,KAAK,WAAW;UACZ,IAAI,CAACI,QAAQ,CAACa,UAAS,GAAI,CAAC;UAC5B;QACJ,KAAK,iBAAiB;UAClB,IAAI,CAACb,QAAQ,CAACa,UAAS,GAAI,CAAC;UAC5B;QACJ,KAAK,UAAU;UACX,IAAI,CAACb,QAAQ,CAACa,UAAS,GAAI,CAAC;UAC5B;QACJ;UACI;MAAK;IAEjB,CAAC;IACDkC,SAASA,CAACE,EAAE,EAAE;MACV,IAAI,CAAClD,OAAO,CAAC2C,OAAO,CAAC,MAAOG,EAAE,IAAK;QAC/B,IAAIA,EAAE,CAACjD,KAAI,IAAKqD,EAAE,EAAE;UAChB,MAAM,IAAI,CAACpB,KAAK,CAACY,GAAG,CAAE,wCAAuCI,EAAE,CAAChD,KAAM,EAAC,CAAC,CAACkC,IAAI,CAAEC,GAAG,IAAK;YACnF,IAAI,CAAChC,QAAQ,CAACM,GAAE,GAAI0B,GAAG,CAAC5C,IAAI,CAAC8D,OAAO;UACxC,CAAC,CAAC,CAACd,KAAK,CAAEC,GAAG,IAAK;YACd,IAAI,CAACJ,QAAQ,CAAC;cACVC,SAAS,EAAE,IAAI;cACfC,IAAI,EAAE,OAAO;cACbhB,OAAO,EAAEkB,GAAG,CAACC,QAAQ,CAAClD;YAC1B,CAAC,CAAC;UACN,CAAC;QACL;MACJ,CAAC;IACL;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}