{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { io } from \"socket.io-client\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  computed: {\n    ...mapGetters({\n      GetUser: \"getUser\"\n    })\n  },\n  data() {\n    return {\n      url: \"http://172.23.20.170:3001\",\n      socket: undefined,\n      connected: false,\n      messages: [],\n      message: \"\"\n    };\n  },\n  beforeUnmount() {\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  },\n  mounted() {\n    this.InitSocket();\n  },\n  methods: {\n    InitSocket() {\n      this.socket = io(this.url);\n      this.socket.on(\"connect\", () => {\n        this.connected = true;\n      });\n      this.socket.on(\"disconnect\", () => {\n        this.connected = false;\n      });\n      this.socket.on(\"msgFromServer\", data => {\n        this.messages.push(`${data.sender}: ${data.content}`);\n        console.log(this.message);\n      });\n    },\n    sendMessage() {\n      console.log(this.message);\n      this.socket.emit(\"sendMsg\", {\n        type: \"ownMsg\",\n        msg: {\n          content: this.message,\n          type: \"text\",\n          sender: this.GetUser.EMP_ID,\n          receiver: 4545454,\n          group_id: 0,\n          media_id: 0\n        }\n      });\n      this.message = \"\";\n    }\n  }\n};","map":{"version":3,"names":["io","mapGetters","computed","GetUser","data","url","socket","undefined","connected","messages","message","beforeUnmount","disconnect","mounted","InitSocket","methods","on","push","sender","content","console","log","sendMessage","emit","type","msg","EMP_ID","receiver","group_id","media_id"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\QMessage\\MsgSender.vue"],"sourcesContent":["<template>\r\n  <div\r\n    style=\"\r\n      width: 100%;\r\n      background-color: #bde9f2;\r\n      position: relative;\r\n      border-radius: 5px;      \r\n    \"\r\n    :class=\"{'disabled':!connected}\"\r\n  >\r\n    <q-bar dense class=\"bg-teal text-white\">\r\n      <q-btn-group flat>\r\n        <q-btn square icon=\"sentiment_satisfied\" />\r\n        <q-btn square icon=\"content_cut\" />\r\n        <q-btn square icon=\"drive_folder_upload\" />\r\n        <q-btn square icon=\"edit_location\" />\r\n      </q-btn-group>\r\n      <q-space></q-space>\r\n      <q-btn-group flat>\r\n        <q-btn square icon=\"history\" />\r\n      </q-btn-group>\r\n    </q-bar>\r\n    <q-input\r\n      v-model=\"message\"\r\n      type=\"textarea\"\r\n      standout=\"bg-teal-2 text-white\"\r\n      input-style=\"height: 50px;\"\r\n      :disable=\"!connected\"\r\n    >\r\n    </q-input>\r\n    <q-btn\r\n    :disable=\"!connected\"\r\n      @click=\"sendMessage\"\r\n      size=\"20px\"\r\n      round\r\n      dense\r\n      flat\r\n      icon=\"send\"\r\n      style=\"position: absolute; bottom: 2px; right: 15px\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { io } from \"socket.io-client\";\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n  computed: {\r\n    ...mapGetters({\r\n      GetUser: \"getUser\",\r\n    }),\r\n  },data() {\r\n    return {\r\n      url: \"http://172.23.20.170:3001\",\r\n      socket: undefined,\r\n      connected: false,\r\n      messages: [],\r\n      message: \"\",\r\n    };\r\n  },\r\n  beforeUnmount() {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.InitSocket();\r\n  },\r\n  methods: {\r\n    InitSocket() {\r\n      this.socket = io(this.url);\r\n      this.socket.on(\"connect\", () => {\r\n        this.connected = true;\r\n      });\r\n\r\n      this.socket.on(\"disconnect\", () => {\r\n        this.connected = false;\r\n      });\r\n\r\n      this.socket.on(\"msgFromServer\", (data) => {\r\n        this.messages.push(`${data.sender}: ${data.content}`);\r\n        console.log(this.message);\r\n      });\r\n    },\r\n    sendMessage() {\r\n      console.log(this.message);\r\n      this.socket.emit(\"sendMsg\", {\r\n        type: \"ownMsg\",\r\n        msg: {\r\n          content: this.message,\r\n          type: \"text\",\r\n          sender: this.GetUser.EMP_ID,\r\n          receiver: 4545454,\r\n          group_id: 0,\r\n          media_id: 0,\r\n        },\r\n      });\r\n      this.message = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"mappings":";AA4CA,SAASA,EAAC,QAAS,kBAAkB;AACrC,SAASC,UAAS,QAAS,MAAM;AACjC,eAAe;EACbC,QAAQ,EAAE;IACR,GAAGD,UAAU,CAAC;MACZE,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EAACC,IAAIA,CAAA,EAAG;IACP,OAAO;MACLC,GAAG,EAAE,2BAA2B;MAChCC,MAAM,EAAEC,SAAS;MACjBC,SAAS,EAAE,KAAK;MAChBC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI,IAAI,CAACL,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACM,UAAU,EAAE;IAC1B;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,UAAU,EAAE;EACnB,CAAC;EACDC,OAAO,EAAE;IACPD,UAAUA,CAAA,EAAG;MACX,IAAI,CAACR,MAAK,GAAIN,EAAE,CAAC,IAAI,CAACK,GAAG,CAAC;MAC1B,IAAI,CAACC,MAAM,CAACU,EAAE,CAAC,SAAS,EAAE,MAAM;QAC9B,IAAI,CAACR,SAAQ,GAAI,IAAI;MACvB,CAAC,CAAC;MAEF,IAAI,CAACF,MAAM,CAACU,EAAE,CAAC,YAAY,EAAE,MAAM;QACjC,IAAI,CAACR,SAAQ,GAAI,KAAK;MACxB,CAAC,CAAC;MAEF,IAAI,CAACF,MAAM,CAACU,EAAE,CAAC,eAAe,EAAGZ,IAAI,IAAK;QACxC,IAAI,CAACK,QAAQ,CAACQ,IAAI,CAAE,GAAEb,IAAI,CAACc,MAAO,KAAId,IAAI,CAACe,OAAQ,EAAC,CAAC;QACrDC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACX,OAAO,CAAC;MAC3B,CAAC,CAAC;IACJ,CAAC;IACDY,WAAWA,CAAA,EAAG;MACZF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACX,OAAO,CAAC;MACzB,IAAI,CAACJ,MAAM,CAACiB,IAAI,CAAC,SAAS,EAAE;QAC1BC,IAAI,EAAE,QAAQ;QACdC,GAAG,EAAE;UACHN,OAAO,EAAE,IAAI,CAACT,OAAO;UACrBc,IAAI,EAAE,MAAM;UACZN,MAAM,EAAE,IAAI,CAACf,OAAO,CAACuB,MAAM;UAC3BC,QAAQ,EAAE,OAAO;UACjBC,QAAQ,EAAE,CAAC;UACXC,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC;MACF,IAAI,CAACnB,OAAM,GAAI,EAAE;IACnB;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}