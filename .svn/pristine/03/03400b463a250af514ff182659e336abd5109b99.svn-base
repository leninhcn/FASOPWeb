{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-86633376\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"mainDiv\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"icofont-ui-delete\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  style: {\n    \"display\": \"flex\"\n  }\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"icofont-edit\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"icofont-sub-listing\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"icofont-ui-delete\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"text-gray-500\"\n};\nconst _hoisted_9 = {\n  class: \"text-gray-500\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_popconfirm = _resolveComponent(\"el-popconfirm\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_footer = _resolveComponent(\"el-footer\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_newstep = _resolveComponent(\"newstep\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_main, null, {\n    default: _withCtx(() => [_createVNode(_component_el_table, {\n      data: $data.TempData,\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        type: \"expand\"\n      }, {\n        default: _withCtx(props => [_createElementVNode(\"ol\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.row.LstStepName, (item, index) => {\n          return _openBlock(), _createElementBlock(\"li\", {\n            key: index\n          }, [_createElementVNode(\"div\", null, [_createElementVNode(\"a\", {\n            href: \"#\",\n            onClick: _withModifiers($event => $options.handleNewStep(false, {\n              step_name: item,\n              seq: index,\n              sop: props.row\n            }), [\"prevent\"])\n          }, _toDisplayString(item), 9 /* TEXT, PROPS */, _hoisted_2), _createVNode(_component_el_popconfirm, {\n            title: \"Are you sure to delete this item?\",\n            onConfirm: _cache[0] || (_cache[0] = $event => $options.handleDeleteStep(_ctx.scope.$index, _ctx.scope.row))\n          }, {\n            reference: _withCtx(() => [_createVNode(_component_el_button, {\n              title: \"Delete\",\n              size: \"small\",\n              type: \"danger\"\n            }, {\n              default: _withCtx(() => [_hoisted_3]),\n              _: 1 /* STABLE */\n            })]),\n\n            _: 1 /* STABLE */\n          })])]);\n        }), 128 /* KEYED_FRAGMENT */))])]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"SOP_NAME\",\n        prop: \"SOP_NAME\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"DEFECT_CODE\",\n        prop: \"DEFECT_CODE\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"DESCRIPTIONS\",\n        prop: \"DESCRIPTIONS\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"UPDATE_TIME\",\n        prop: \"UPDATE_TIME\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"UPDATE_USER\",\n        prop: \"UPDATE_USER\"\n      }), _createVNode(_component_el_table_column, {\n        align: \"right\"\n      }, {\n        header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_input, {\n          style: {\n            \"flex\": \"1\",\n            \"margin-right\": \"5px\"\n          },\n          modelValue: $data.search,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.search = $event),\n          onChange: $options.filterTableData,\n          size: \"small\",\n          placeholder: \"Type to search\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onChange\"]), _createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $options.AddNewSOP,\n          type: \"primary\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Add New\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])])]),\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          title: \"Edit\",\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $options.handleEdit(scope.$index, scope.row)\n        }, {\n          default: _withCtx(() => [_hoisted_5]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          title: \"Add New Step\",\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $options.handleNewStep(true, {\n            step_name: '',\n            seq: 0,\n            sop: scope.row\n          })\n        }, {\n          default: _withCtx(() => [_hoisted_6]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_popconfirm, {\n          title: \"Are you sure to delete this?\",\n          onConfirm: $event => $options.handleDelete(scope.$index, scope.row)\n        }, {\n          reference: _withCtx(() => [_createVNode(_component_el_button, {\n            title: \"Delete\",\n            size: \"small\",\n            type: \"danger\"\n          }, {\n            default: _withCtx(() => [_hoisted_7]),\n            _: 1 /* STABLE */\n          })]),\n\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onConfirm\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_footer, null, {\n    default: _withCtx(() => [_createVNode(_component_el_pagination, {\n      \"current-page\": $data.currentPage,\n      \"onUpdate:currentPage\": _cache[2] || (_cache[2] = $event => $data.currentPage = $event),\n      \"page-size\": $data.pageSize,\n      \"onUpdate:pageSize\": _cache[3] || (_cache[3] = $event => $data.pageSize = $event),\n      \"page-sizes\": [100, 200, 300, 400],\n      small: _ctx.small,\n      disabled: false,\n      background: false,\n      layout: \"total, sizes, prev, pager, next, jumper\",\n      total: $data.TotalPages,\n      onSizeChange: _ctx.handleSizeChange,\n      onCurrentChange: _ctx.handleCurrentChange\n    }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"small\", \"total\", \"onSizeChange\", \"onCurrentChange\"])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_dialog, {\n    modelValue: $data.ShowEdit,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.ShowEdit = $event),\n    title: $data.opMode\n  }, {\n    default: _withCtx(() => [$data.ShowEdit ? (_openBlock(), _createBlock(_component_el_form, {\n      key: 0,\n      \"label-position\": \"left\",\n      ref: \"ruleFormRef\",\n      model: $data.edittingSOP,\n      \"label-width\": \"120px\",\n      class: \"demo-ruleForm\",\n      \"status-icon\": \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"SOP Name\",\n        required: \"\",\n        prop: \"sop_Name\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.edittingSOP.sop_Name,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.edittingSOP.sop_Name = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"SOP ID\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_8, _toDisplayString($data.edittingSOP.sop_ID), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"Error Code\",\n        prop: \"defect_id\",\n        required: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.edittingSOP.defect_id,\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.edittingSOP.defect_id = $event),\n          filterable: \"\",\n          remote: \"\",\n          clearable: \"\",\n          \"reserve-keyword\": \"\",\n          placeholder: \"Enter a Error Code\",\n          \"remote-method\": $options.remoteMethod,\n          loading: $data.loading\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.options, item => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: item.DEFECT_ID,\n              label: item.DEFECT_CODE,\n              value: item.DEFECT_ID\n            }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\", \"remote-method\", \"loading\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"Descriptions\",\n        prop: \"DESCRIPTIONS\",\n        required: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.edittingSOP.DESCRIPTIONS,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.edittingSOP.DESCRIPTIONS = $event),\n          type: \"textarea\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"Update User\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_9, _toDisplayString($data.edittingSOP.update_user), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $options.submitForm\n        }, {\n          default: _withCtx(() => [_createTextVNode(\" Submit \")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          onClick: _cache[7] || (_cache[7] = $event => $data.ShowEdit = false)\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Cancel\")]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"]), _createVNode(_component_el_dialog, {\n    modelValue: $data.ShowNewStep,\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.ShowNewStep = $event),\n    title: $data.NewstepOpMode ? 'New Step' : 'Edit Step'\n  }, {\n    default: _withCtx(() => [$data.ShowNewStep ? (_openBlock(), _createBlock(_component_newstep, {\n      key: 0,\n      AddNew: $data.NewstepOpMode,\n      Data: $data.EditingStep,\n      onCancelEvent: $options.NewStepFinish\n    }, null, 8 /* PROPS */, [\"AddNew\", \"Data\", \"onCancelEvent\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_1","_createVNode","_component_el_main","_component_el_table","data","$data","TempData","_component_el_table_column","type","default","_withCtx","props","_Fragment","_renderList","row","LstStepName","item","index","key","href","onClick","_withModifiers","$event","$options","handleNewStep","step_name","seq","sop","_hoisted_2","_component_el_popconfirm","title","onConfirm","_cache","handleDeleteStep","_ctx","scope","$index","reference","_component_el_button","size","_hoisted_3","label","prop","align","header","_hoisted_4","_component_el_input","search","onChange","filterTableData","placeholder","AddNewSOP","handleEdit","_hoisted_5","_hoisted_6","handleDelete","_hoisted_7","_component_el_footer","_component_el_pagination","currentPage","pageSize","small","disabled","background","layout","total","TotalPages","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","_component_el_dialog","ShowEdit","opMode","_createBlock","_component_el_form","ref","model","edittingSOP","_component_el_form_item","required","sop_Name","_hoisted_8","_toDisplayString","sop_ID","_component_el_select","defect_id","filterable","remote","clearable","remoteMethod","loading","options","_component_el_option","DEFECT_ID","DEFECT_CODE","value","DESCRIPTIONS","_hoisted_9","update_user","submitForm","ShowNewStep","NewstepOpMode","_component_newstep","AddNew","Data","EditingStep","onCancelEvent","NewStepFinish"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\FAComs\\SopManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"mainDiv\">\r\n        <el-main>\r\n            <el-table :data=\"TempData\" style=\"width: 100%\">\r\n                <el-table-column type=\"expand\">\r\n                    <template #default=\"props\">\r\n                        <ol>\r\n                            <li v-for=\"(item, index) in props.row.LstStepName\" :key=\"index\">\r\n                                <div>\r\n                                    <a href=\"#\"\r\n                                        @click.prevent=\"handleNewStep(false, { step_name: item, seq: index, sop: props.row })\">{{\r\n                                            item\r\n                                        }}</a>\r\n                                    <el-popconfirm title=\"Are you sure to delete this item?\"\r\n                                        @confirm=\"handleDeleteStep(scope.$index, scope.row)\">\r\n                                        <template #reference>\r\n                                            <el-button title=\"Delete\" size=\"small\" type=\"danger\"><i\r\n                                                    class=\"icofont-ui-delete\"></i></el-button>\r\n                                        </template>\r\n                                    </el-popconfirm>\r\n                                </div>\r\n                            </li>\r\n                        </ol>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"SOP_NAME\" prop=\"SOP_NAME\" />\r\n                <el-table-column label=\"DEFECT_CODE\" prop=\"DEFECT_CODE\" />\r\n                <el-table-column label=\"DESCRIPTIONS\" prop=\"DESCRIPTIONS\" />\r\n                <el-table-column label=\"UPDATE_TIME\" prop=\"UPDATE_TIME\" />\r\n                <el-table-column label=\"UPDATE_USER\" prop=\"UPDATE_USER\" />\r\n                <el-table-column align=\"right\">\r\n                    <template #header>\r\n                        <div style=\"display: flex;\">\r\n                            <el-input style=\"flex: 1;margin-right: 5px;\" v-model=\"search\" @change=\"filterTableData\"\r\n                                size=\"small\" placeholder=\"Type to search\" />\r\n                            <el-button size=\"small\" @click=\"AddNewSOP\" type=\"primary\">Add New</el-button>\r\n                        </div>\r\n                    </template>\r\n                    <template #default=\"scope\">\r\n                        <el-button title=\"Edit\" type=\"primary\" size=\"small\" @click=\"handleEdit(scope.$index, scope.row)\"><i\r\n                                class=\"icofont-edit\"></i></el-button>\r\n                        <el-button title=\"Add New Step\" type=\"primary\" size=\"small\"\r\n                            @click=\"handleNewStep(true, { step_name: '', seq: 0, sop: scope.row })\"><i\r\n                                class=\"icofont-sub-listing\"></i></el-button>\r\n                        <el-popconfirm title=\"Are you sure to delete this?\"\r\n                            @confirm=\"handleDelete(scope.$index, scope.row)\">\r\n                            <template #reference>\r\n                                <el-button title=\"Delete\" size=\"small\" type=\"danger\"><i\r\n                                        class=\"icofont-ui-delete\"></i></el-button>\r\n                            </template>\r\n                        </el-popconfirm>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-main>\r\n        <el-footer>\r\n            <el-pagination v-model:current-page=\"currentPage\" v-model:page-size=\"pageSize\"\r\n                :page-sizes=\"[100, 200, 300, 400]\" :small=\"small\" :disabled=\"false\" :background=\"false\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\" :total=\"TotalPages\" @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\" />\r\n        </el-footer>\r\n        <el-dialog v-model=\"ShowEdit\" :title=\"opMode\">\r\n            <el-form v-if=\"ShowEdit\" label-position=\"left\" ref=\"ruleFormRef\" :model=\"edittingSOP\" label-width=\"120px\"\r\n                class=\"demo-ruleForm\" status-icon>\r\n                <el-form-item label=\"SOP Name\" required prop=\"sop_Name\">\r\n                    <el-input v-model=\"edittingSOP.sop_Name\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"SOP ID\">\r\n                    <span class=\"text-gray-500\">{{ edittingSOP.sop_ID }}</span>\r\n                </el-form-item>\r\n                <el-form-item label=\"Error Code\" prop=\"defect_id\" required>\r\n                    <el-select v-model=\"edittingSOP.defect_id\" filterable remote clearable reserve-keyword\r\n                        placeholder=\"Enter a Error Code\" :remote-method=\"remoteMethod\" :loading=\"loading\">\r\n                        <el-option v-for=\"item in options\" :key=\"item.DEFECT_ID\" :label=\"item.DEFECT_CODE\"\r\n                            :value=\"item.DEFECT_ID\" />\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"Descriptions\" prop=\"DESCRIPTIONS\" required>\r\n                    <el-input v-model=\"edittingSOP.DESCRIPTIONS\" type=\"textarea\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"Update User\">\r\n                    <span class=\"text-gray-500\">{{ edittingSOP.update_user }}</span>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm\">\r\n                        Submit\r\n                    </el-button>\r\n                    <el-button @click=\"ShowEdit = false\">Cancel</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n        <el-dialog v-model=\"ShowNewStep\" :title=\"NewstepOpMode ? 'New Step' : 'Edit Step'\">\r\n            <newstep :AddNew=\"NewstepOpMode\" :Data=\"EditingStep\" v-if=\"ShowNewStep\" @CancelEvent=\"NewStepFinish\">\r\n            </newstep>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    mapActions,\r\n    mapGetters,\r\n    mapMutations\r\n} from \"vuex\";\r\nimport newstep from './NewStep.vue'\r\nexport default {\r\n    components: {\r\n        newstep\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            sop_list: 'getSOPList',\r\n            sop_stt: 'getSOPstatus',\r\n            LoginUser: 'getUser'\r\n        })\r\n    },\r\n    mounted() {\r\n        this.GetAllSOP();\r\n    },\r\n    data() {\r\n        return {\r\n            TotalPages: 1,\r\n            EditingStep: undefined,\r\n            NewstepOpMode: false,\r\n            loading: false,\r\n            ShowNewStep: false,\r\n            currentPage: 1,\r\n            pageSize: 100,\r\n            opMode: 'SOP Edit',\r\n            search: '',\r\n            TempData: [],\r\n            ShowEdit: false,\r\n            edittingSOP: {\r\n                sop_Name: '',\r\n                sop_ID: 0,\r\n                defect_code: '',\r\n                defect_id: '',\r\n                DESCRIPTIONS: '',\r\n                update_user: 0,\r\n                old_sopName: ''\r\n            },\r\n            list_error: [{ DEFECT_ID: 'ER01', DEFECT_CODE: 'ER01' }],\r\n            options: []\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['GetSOPErrorCode']),\r\n        ...mapMutations(['UpdateSOP']),\r\n        filterTableData: function () {\r\n            this.TempData = this.sop_list.filter(\r\n                (data) =>\r\n                    !this.search ||\r\n                    data.SOP_NAME.toLowerCase().includes(this.search.toLowerCase())\r\n            )\r\n        }, async GetAllSOP() {\r\n            const loading = this.$Loading.service({\r\n                lock: true,\r\n                text: \"Loading\",\r\n                background: \"rgba(0, 0, 0, 0.7)\",\r\n            });\r\n            await this.GetSOPErrorCode('getallsop').then(() => {\r\n                this.filterTableData();\r\n                this.TotalPages = this.sop_list.length;\r\n                loading.close();\r\n            }).catch(err => {\r\n                loading.close();\r\n                console.log(err.response.data);\r\n            });\r\n        },\r\n        NewStepFinish(pcDone) {\r\n            if (pcDone) this.GetAllSOP();\r\n            this.ShowNewStep = false;\r\n        },\r\n        handleEdit(index, row) {\r\n            this.opMode = 'SOP Edit';\r\n            this.edittingSOP.sop_Name = row.SOP_NAME;\r\n            this.edittingSOP.old_sopName = row.SOP_NAME;\r\n            this.edittingSOP.sop_ID = row.SOP_ID;\r\n            this.edittingSOP.defect_code = row.DEFECT_CODE;\r\n            this.edittingSOP.DESCRIPTIONS = row.DESCRIPTIONS;\r\n            this.edittingSOP.defect_id = row.DEFECT_ID;\r\n            this.ShowEdit = true;\r\n            this.options = [{ DEFECT_ID: row.DEFECT_ID, DEFECT_CODE: row.DEFECT_CODE }]\r\n        },\r\n        handleNewStep(addNew, stepData) {\r\n            this.EditingStep = stepData;\r\n            this.NewstepOpMode = addNew;\r\n            this.ShowNewStep = true;\r\n        },\r\n        async handleDelete(index, sop) {\r\n            const sop_id = sop.SOP_ID;\r\n            await this.axios.post(`api/FAOnlineSOP/DeleteSOP?sop_id=${sop_id}`).then((response) => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"success\",\r\n                    message: response.data,\r\n                });\r\n                this.GetAllSOP();\r\n            }).catch((err) => {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: err.data,\r\n                });\r\n            });\r\n        },handleDeleteStep(){\r\n\r\n        },\r\n        AddNewSOP() {\r\n            this.edittingSOP = {\r\n                sop_Name: '',\r\n                sop_ID: 0,\r\n                defect_code: '',\r\n                defect_id: '',\r\n                DESCRIPTIONS: '',\r\n                update_user: this.LoginUser.EMP_ID\r\n            };\r\n            this.opMode = 'Add New SOP';\r\n            this.options = [];\r\n            this.ShowEdit = true;\r\n        },\r\n        async submitForm() {\r\n            console.log(this.edittingSOP);\r\n            if (!this.edittingSOP.sop_Name || !this.edittingSOP.defect_id || !this.edittingSOP.DESCRIPTIONS) {\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: \"The information has not been entered completely\",\r\n                });\r\n                return;\r\n            }\r\n            const api_url = this.opMode.includes('Add New') ? 'api/FAOnlineSOP/AddNewSOP' : `api/FAOnlineSOP/UpdateSOP?oldSOPname=${this.edittingSOP.old_sopName}`\r\n            await this.axios.post(api_url, this.edittingSOP).then((response) => {\r\n                console.log(response);\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"success\",\r\n                    message: response.data,\r\n                });\r\n                this.ShowEdit = false;\r\n                this.GetAllSOP();\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                this.$message({\r\n                    showClose: true,\r\n                    type: \"error\",\r\n                    message: err.response.data,\r\n                });\r\n            });\r\n        },\r\n        async remoteMethod(query) {\r\n            if (query) {\r\n                this.loading = true;\r\n                await this.axios.get(`api/FAOnlineSOP/GetErrorCode?filter=${query}`).then((response) => {\r\n                    this.list_error = response.data;\r\n                }).catch((err) => {\r\n                    console.log(err);\r\n                    this.list_error = []\r\n                })\r\n                setTimeout(() => {\r\n                    this.loading = false\r\n                    this.options = this.list_error.filter((item) => {\r\n                        return item.DEFECT_CODE.toLowerCase().includes(query.toLowerCase())\r\n                    })\r\n                }, 500)\r\n            } else {\r\n                this.options = []\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.mainDiv {\r\n    height: 89vh;\r\n    background-color: #ffffff;\r\n}\r\n\r\n.el-popper.is-customized {\r\n    /* Set padding to ensure the height is 32px */\r\n    padding: 6px 12px;\r\n    background: linear-gradient(90deg, rgb(159, 229, 151), rgb(204, 229, 129));\r\n}\r\n\r\n.el-popper.is-customized .el-popper__arrow::before {\r\n    background: linear-gradient(45deg, #b2e68d, #bce689);\r\n    right: 0;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}