{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport sop_step from './StepDetails.vue';\nimport { mapActions, mapGetters, mapMutations } from \"vuex\";\nexport default {\n  computed: {\n    ...mapGetters({\n      sop_list: 'getSOPList',\n      sop_stt: 'getSOPstatus'\n    })\n  },\n  data() {\n    return {\n      searchData: {\n        serial_number: '',\n        er_id: '',\n        er_code: ''\n      },\n      showDetail: false,\n      current_id: 0,\n      current_sop_name: '',\n      gridData: [],\n      snErrorCodes: ['N/A']\n    };\n  },\n  methods: {\n    ...mapActions(['GetSOPErrorCode']),\n    ...mapMutations(['UpdateSOP']),\n    handleRowClick(row) {\n      this.current_id = row.SOP_ID;\n      this.current_sop_name = row.SOP_NAME;\n      this.showDetail = true;\n    },\n    rowCustomStyle() {\n      return {\n        cursor: 'pointer'\n      };\n    },\n    LoadSNError: async function () {\n      if (!this.searchData.serial_number) {\n        this.UpdateSOP(undefined);\n        return null;\n      }\n      await this.axios.get(`api/FAOnlineSOP/GetSNErrorCode/sn/${this.searchData.serial_number}`).then(result => {\n        this.snErrorCodes = [];\n        if (result.data.length > 0) {\n          result.data.forEach(item => {\n            this.snErrorCodes.push(item.DEFECT_CODE);\n          });\n          this.searchData.er_code = this.snErrorCodes[0];\n          this.GetSOPErrorCode(this.searchData.er_code);\n        }\n      }).catch(err => {\n        alert(err.response.data);\n        this.snErrorCodes = ['N/A'];\n      });\n    },\n    onSubmit() {\n      this.GetSOPErrorCode(this.searchData.er_code);\n    }\n  },\n  components: {\n    sop_step\n  }\n};","map":{"version":3,"names":["sop_step","mapActions","mapGetters","mapMutations","computed","sop_list","sop_stt","data","searchData","serial_number","er_id","er_code","showDetail","current_id","current_sop_name","gridData","snErrorCodes","methods","handleRowClick","row","SOP_ID","SOP_NAME","rowCustomStyle","cursor","LoadSNError","UpdateSOP","undefined","axios","get","then","result","length","forEach","item","push","DEFECT_CODE","GetSOPErrorCode","catch","err","alert","response","onSubmit","components"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\FAComs\\RepairSOP.vue"],"sourcesContent":["<template>\r\n<div class=\"eltb\">\r\n    <el-form :inline=\"true\" :model=\"searchData\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"Serial Number\">\r\n            <el-input v-model=\"searchData.serial_number\" @change=\"LoadSNError\" placeholder=\"Serial Number\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Error Code\">\r\n            <el-select v-for=\"(item, index) in snErrorCodes\" :key=\"index\" @change=\"GetSOPErrorCode\" v-model=\"searchData.er_code\" placeholder=\"Error Code\">\r\n                <el-option :label=\"item\" :value=\"item\" />\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onSubmit\">Query</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n    <el-table :data=\"sop_list\" @row-click=\"handleRowClick\" :row-style=\"rowCustomStyle\">\r\n        <el-table-column property=\"DEFECT_CODE\" label=\"Error Code\" />\r\n        <el-table-column property=\"SOP_NAME\" label=\"SOP Name\" />\r\n        <el-table-column property=\"DESCRIPTIONS\" label=\"Descriptions\" />\r\n        <el-table-column property=\"UPDATE_TIME\" label=\"Update Time\" />\r\n        <el-table-column property=\"UPDATE_USER\" label=\"Update User\" />\r\n    </el-table>\r\n    <el-dialog v-model=\"showDetail\" :title=\"current_sop_name\">\r\n        <sop_step v-if=\"showDetail\" :sop_id=\"current_id\"></sop_step>\r\n    </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport sop_step from './StepDetails.vue'\r\nimport {\r\n    mapActions,\r\n    mapGetters,\r\n    mapMutations\r\n} from \"vuex\";\r\nexport default {\r\n    computed: {\r\n        ...mapGetters({\r\n            sop_list: 'getSOPList',\r\n            sop_stt: 'getSOPstatus'\r\n        })\r\n    },\r\n    data() {\r\n        return {\r\n            searchData: {\r\n                serial_number: '',\r\n                er_id: '',\r\n                er_code: ''\r\n            },\r\n            showDetail: false,\r\n            current_id: 0,\r\n            current_sop_name: '',\r\n            gridData: [],\r\n            snErrorCodes: ['N/A']\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['GetSOPErrorCode']),\r\n        ...mapMutations(['UpdateSOP']),\r\n        handleRowClick(row) {\r\n            this.current_id = row.SOP_ID;\r\n            this.current_sop_name = row.SOP_NAME;\r\n            this.showDetail = true;\r\n        },\r\n        rowCustomStyle() {\r\n            return {\r\n                cursor: 'pointer'\r\n            };\r\n        },\r\n        LoadSNError: async function () {\r\n            if (!this.searchData.serial_number) {\r\n                this.UpdateSOP(undefined);\r\n                return null;\r\n            }\r\n            await this.axios.get(`api/FAOnlineSOP/GetSNErrorCode/sn/${this.searchData.serial_number}`)\r\n                .then((result) => {\r\n                    this.snErrorCodes = [];\r\n                    if (result.data.length > 0) {\r\n                        result.data.forEach(item => {\r\n                            this.snErrorCodes.push(item.DEFECT_CODE);\r\n                        });\r\n                        this.searchData.er_code = this.snErrorCodes[0];\r\n                        this.GetSOPErrorCode(this.searchData.er_code);\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    alert(err.response.data);\r\n                    this.snErrorCodes = ['N/A'];\r\n                });\r\n        },\r\n        onSubmit() {\r\n            this.GetSOPErrorCode(this.searchData.er_code);\r\n        }\r\n    },\r\n    components: {\r\n        sop_step\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.eltb {\r\n    height: 89vh;\r\n}\r\n</style>\r\n"],"mappings":";AA6BA,OAAOA,QAAO,MAAO,mBAAkB;AACvC,SACIC,UAAU,EACVC,UAAU,EACVC,YAAW,QACR,MAAM;AACb,eAAe;EACXC,QAAQ,EAAE;IACN,GAAGF,UAAU,CAAC;MACVG,QAAQ,EAAE,YAAY;MACtBC,OAAO,EAAE;IACb,CAAC;EACL,CAAC;EACDC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,UAAU,EAAE;QACRC,aAAa,EAAE,EAAE;QACjBC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE;MACb,CAAC;MACDC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,CAAC;MACbC,gBAAgB,EAAE,EAAE;MACpBC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE,CAAC,KAAK;IACxB;EACJ,CAAC;EACDC,OAAO,EAAE;IACL,GAAGhB,UAAU,CAAC,CAAC,iBAAiB,CAAC,CAAC;IAClC,GAAGE,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC;IAC9Be,cAAcA,CAACC,GAAG,EAAE;MAChB,IAAI,CAACN,UAAS,GAAIM,GAAG,CAACC,MAAM;MAC5B,IAAI,CAACN,gBAAe,GAAIK,GAAG,CAACE,QAAQ;MACpC,IAAI,CAACT,UAAS,GAAI,IAAI;IAC1B,CAAC;IACDU,cAAcA,CAAA,EAAG;MACb,OAAO;QACHC,MAAM,EAAE;MACZ,CAAC;IACL,CAAC;IACDC,WAAW,EAAE,eAAAA,CAAA,EAAkB;MAC3B,IAAI,CAAC,IAAI,CAAChB,UAAU,CAACC,aAAa,EAAE;QAChC,IAAI,CAACgB,SAAS,CAACC,SAAS,CAAC;QACzB,OAAO,IAAI;MACf;MACA,MAAM,IAAI,CAACC,KAAK,CAACC,GAAG,CAAE,qCAAoC,IAAI,CAACpB,UAAU,CAACC,aAAc,EAAC,EACpFoB,IAAI,CAAEC,MAAM,IAAK;QACd,IAAI,CAACd,YAAW,GAAI,EAAE;QACtB,IAAIc,MAAM,CAACvB,IAAI,CAACwB,MAAK,GAAI,CAAC,EAAE;UACxBD,MAAM,CAACvB,IAAI,CAACyB,OAAO,CAACC,IAAG,IAAK;YACxB,IAAI,CAACjB,YAAY,CAACkB,IAAI,CAACD,IAAI,CAACE,WAAW,CAAC;UAC5C,CAAC,CAAC;UACF,IAAI,CAAC3B,UAAU,CAACG,OAAM,GAAI,IAAI,CAACK,YAAY,CAAC,CAAC,CAAC;UAC9C,IAAI,CAACoB,eAAe,CAAC,IAAI,CAAC5B,UAAU,CAACG,OAAO,CAAC;QACjD;MACJ,CAAC,EACA0B,KAAK,CAAEC,GAAG,IAAK;QACZC,KAAK,CAACD,GAAG,CAACE,QAAQ,CAACjC,IAAI,CAAC;QACxB,IAAI,CAACS,YAAW,GAAI,CAAC,KAAK,CAAC;MAC/B,CAAC,CAAC;IACV,CAAC;IACDyB,QAAQA,CAAA,EAAG;MACP,IAAI,CAACL,eAAe,CAAC,IAAI,CAAC5B,UAAU,CAACG,OAAO,CAAC;IACjD;EACJ,CAAC;EACD+B,UAAU,EAAE;IACR1C;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}