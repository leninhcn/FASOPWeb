{"ast":null,"code":"import { createCanvas, loadImage } from \"canvas\";\nexport default {\n  name: \"ImageMerging\",\n  data() {\n    return {\n      mergedImageUrl: \"\"\n    };\n  },\n  mounted() {},\n  methods: {\n    async ImageMerging() {\n      const canvasWidth = 900;\n      const canvasHeight = 300;\n\n      // Tạo đối tượng canvas với kích thước tương ứng\n      const canvas = createCanvas(canvasWidth, canvasHeight);\n      const ctx = canvas.getContext(\"2d\");\n      const img1 = await loadImage(Buffer.from(img1Data));\n      const img2 = await loadImage(Buffer.from(img2Data));\n      const img3 = await loadImage(Buffer.from(img3Data));\n\n      // Đợi cho tất cả các ảnh được tải xong\n      Promise.all([new Promise(resolve => img1.addEventListener(\"load\", resolve)), new Promise(resolve => img2.addEventListener(\"load\", resolve)), new Promise(resolve => img3.addEventListener(\"load\", resolve))]).then(() => {\n        // Vẽ ảnh thứ nhất từ điểm (0, 0)\n        ctx.drawImage(img1, 0, 0);\n\n        // Vẽ ảnh thứ hai từ điểm (300, 0)\n        ctx.drawImage(img2, 300, 0);\n\n        // Vẽ ảnh thứ ba từ điểm (600, 0)\n        ctx.drawImage(img3, 600, 0);\n\n        // Lấy ảnh đầu ra từ canvas dưới dạng buffer\n        const finalImageData = canvas.toDataURL(); //canvas.toBuffer(\"image/png\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["createCanvas","loadImage","name","data","mergedImageUrl","mounted","methods","ImageMerging","canvasWidth","canvasHeight","canvas","ctx","getContext","img1","Buffer","from","img1Data","img2","img2Data","img3","img3Data","Promise","all","resolve","addEventListener","then","drawImage","finalImageData","toDataURL"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\QMessage\\ImageMerging.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <img :src=\"mergedImageUrl\" alt=\"Merged Image\" />\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\nimport { createCanvas, loadImage } from \"canvas\";\r\n\r\nexport default {\r\n  name: \"ImageMerging\",\r\n  data() {\r\n    return {\r\n      mergedImageUrl: \"\",\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    async ImageMerging() {\r\n      const canvasWidth = 900;\r\n      const canvasHeight = 300;\r\n\r\n      // Tạo đối tượng canvas với kích thước tương ứng\r\n      const canvas = createCanvas(canvasWidth, canvasHeight);\r\n      const ctx = canvas.getContext(\"2d\");\r\n\r\n      const img1 = await loadImage(Buffer.from(img1Data));\r\n\r\n      const img2 = await loadImage(Buffer.from(img2Data));\r\n\r\n      const img3 = await loadImage(Buffer.from(img3Data));\r\n\r\n      // Đợi cho tất cả các ảnh được tải xong\r\n      Promise.all([\r\n        new Promise((resolve) => img1.addEventListener(\"load\", resolve)),\r\n        new Promise((resolve) => img2.addEventListener(\"load\", resolve)),\r\n        new Promise((resolve) => img3.addEventListener(\"load\", resolve)),\r\n      ]).then(() => {\r\n        // Vẽ ảnh thứ nhất từ điểm (0, 0)\r\n        ctx.drawImage(img1, 0, 0);\r\n\r\n        // Vẽ ảnh thứ hai từ điểm (300, 0)\r\n        ctx.drawImage(img2, 300, 0);\r\n\r\n        // Vẽ ảnh thứ ba từ điểm (600, 0)\r\n        ctx.drawImage(img3, 600, 0);\r\n\r\n        // Lấy ảnh đầu ra từ canvas dưới dạng buffer\r\n        const finalImageData = canvas.toDataURL(); //canvas.toBuffer(\"image/png\");\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n  "],"mappings":"AAOA,SAASA,YAAY,EAAEC,SAAQ,QAAS,QAAQ;AAEhD,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG,CAAC,CAAC;EACZC,OAAO,EAAE;IACP,MAAMC,YAAYA,CAAA,EAAG;MACnB,MAAMC,WAAU,GAAI,GAAG;MACvB,MAAMC,YAAW,GAAI,GAAG;;MAExB;MACA,MAAMC,MAAK,GAAIV,YAAY,CAACQ,WAAW,EAAEC,YAAY,CAAC;MACtD,MAAME,GAAE,GAAID,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;MAEnC,MAAMC,IAAG,GAAI,MAAMZ,SAAS,CAACa,MAAM,CAACC,IAAI,CAACC,QAAQ,CAAC,CAAC;MAEnD,MAAMC,IAAG,GAAI,MAAMhB,SAAS,CAACa,MAAM,CAACC,IAAI,CAACG,QAAQ,CAAC,CAAC;MAEnD,MAAMC,IAAG,GAAI,MAAMlB,SAAS,CAACa,MAAM,CAACC,IAAI,CAACK,QAAQ,CAAC,CAAC;;MAEnD;MACAC,OAAO,CAACC,GAAG,CAAC,CACV,IAAID,OAAO,CAAEE,OAAO,IAAKV,IAAI,CAACW,gBAAgB,CAAC,MAAM,EAAED,OAAO,CAAC,CAAC,EAChE,IAAIF,OAAO,CAAEE,OAAO,IAAKN,IAAI,CAACO,gBAAgB,CAAC,MAAM,EAAED,OAAO,CAAC,CAAC,EAChE,IAAIF,OAAO,CAAEE,OAAO,IAAKJ,IAAI,CAACK,gBAAgB,CAAC,MAAM,EAAED,OAAO,CAAC,CAAC,CACjE,CAAC,CAACE,IAAI,CAAC,MAAM;QACZ;QACAd,GAAG,CAACe,SAAS,CAACb,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;;QAEzB;QACAF,GAAG,CAACe,SAAS,CAACT,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;;QAE3B;QACAN,GAAG,CAACe,SAAS,CAACP,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;;QAE3B;QACA,MAAMQ,cAAa,GAAIjB,MAAM,CAACkB,SAAS,EAAE,EAAE;MAC7C,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}