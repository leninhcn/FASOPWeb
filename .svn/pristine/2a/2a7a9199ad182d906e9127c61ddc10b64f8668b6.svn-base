{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport VueCookies from 'vue-cookies';\nimport router from '../routes';\nexport default {\n  async Login({\n    commit\n  }, credentials) {\n    const response = axios.post('api/FAOnlineSOP/CheckLogin', credentials);\n    return new Promise((resolve, reject) => {\n      response.then(result => {\n        if (result.data.status === 'OK') {\n          const user = result.data.data;\n          sessionStorage.setItem(`avt${user.EMP_ID}`, user.Avatar);\n          user.Avatar = undefined;\n          const isLogin = true;\n          commit('UpdateUser', user);\n          sessionStorage.setItem(\"UserName\", user.NAME);\n          sessionStorage.setItem(\"isLogin\", isLogin);\n          resolve(result);\n        } else {\n          sessionStorage.removeItem(\"isLogin\");\n          reject(\"User Name or Password is incorrect\");\n        }\n      }).catch(err => {\n        sessionStorage.removeItem(\"isLogin\");\n        reject(err);\n      });\n    });\n  },\n  Logout({\n    commit\n  }) {\n    for (let i = 0; i < sessionStorage.length; i++) {\n      const key = sessionStorage.key(i);\n      sessionStorage.removeItem(key);\n    }\n    commit('UpdateUser', undefined);\n    VueCookies.keys().forEach(cookie => VueCookies.remove(cookie));\n    router.push('/');\n  },\n  async GetSOPErrorCode({\n    commit\n  }, error_code) {\n    if (!error_code || !error_code.trim()) {\n      alert('Error Code cannot be empty!');\n      return null;\n    }\n    const response = axios.get(`api/FAOnlineSOP/GetAllSop?error_code=${error_code}`);\n    return new Promise((resolve, reject) => {\n      response.then(result => {\n        commit('UpdateSOP', result.data.data);\n        if (result.data.status === 'OK') {\n          resolve(result);\n        } else {\n          reject(result.data.data);\n        }\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n};","map":{"version":3,"names":["axios","VueCookies","router","Login","commit","credentials","response","post","Promise","resolve","reject","then","result","data","status","user","sessionStorage","setItem","EMP_ID","Avatar","undefined","isLogin","NAME","removeItem","catch","err","Logout","i","length","key","keys","forEach","cookie","remove","push","GetSOPErrorCode","error_code","trim","alert","get"],"sources":["D:/LearnVueJS/Vue3/Projects/fa-sop-online/src/store/actions.js"],"sourcesContent":["import axios from 'axios'\r\nimport VueCookies from 'vue-cookies'\r\nimport router from '../routes';\r\n\r\nexport default {\r\n  async Login({ commit }, credentials) {\r\n\r\n    const response = axios.post('api/FAOnlineSOP/CheckLogin', credentials);\r\n    return new Promise((resolve, reject) => {\r\n      response\r\n        .then((result) => {\r\n          if (result.data.status === 'OK') {\r\n            const user = result.data.data;\r\n            sessionStorage.setItem(`avt${user.EMP_ID}`, user.Avatar);\r\n            user.Avatar = undefined;\r\n            const isLogin = true;\r\n            commit('UpdateUser', user);\r\n            sessionStorage.setItem(\"UserName\", user.NAME);\r\n            sessionStorage.setItem(\"isLogin\", isLogin);\r\n            resolve(result);\r\n          } else {\r\n            sessionStorage.removeItem(\"isLogin\");\r\n            reject(\"User Name or Password is incorrect\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          sessionStorage.removeItem(\"isLogin\");\r\n          reject(err);\r\n        });\r\n    });\r\n  }, Logout({ commit }) {\r\n    for (let i = 0; i < sessionStorage.length; i++) {\r\n      const key = sessionStorage.key(i);\r\n      sessionStorage.removeItem(key);\r\n    }\r\n    commit('UpdateUser', undefined);\r\n    VueCookies.keys().forEach(cookie => VueCookies.remove(cookie));\r\n    router.push('/');\r\n  },\r\n  async GetSOPErrorCode({ commit }, error_code) {\r\n    if (!error_code || !error_code.trim()) {\r\n      alert('Error Code cannot be empty!');\r\n      return null;\r\n    }\r\n    const response = axios.get(`api/FAOnlineSOP/GetAllSop?error_code=${error_code}`);\r\n    return new Promise((resolve, reject) => {\r\n      response\r\n        .then((result) => {\r\n          commit('UpdateSOP', result.data.data);\r\n          if (result.data.status === 'OK') {\r\n            resolve(result);\r\n          } else {\r\n            reject(result.data.data);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}