{"ast":null,"code":"import { createCanvas, loadImage } from \"canvas\";\nexport default {\n  name: \"ImageMerging\",\n  data() {\n    return {\n      mergedImageUrl: \"#\"\n    };\n  },\n  mounted() {\n    this.axios.get(`api/chatapp/GetEmpAllGroup?emp_id=10003367`).then(res => {\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  methods: {\n    async ImageMerging(img1Data, img2Data, img3Data) {\n      const canvasWidth = 900;\n      const canvasHeight = 300;\n\n      // Tạo đối tượng canvas với kích thước tương ứng\n      const canvas = createCanvas(canvasWidth, canvasHeight);\n      const ctx = canvas.getContext(\"2d\");\n      const img1 = await loadImage(Buffer.from(img1Data));\n      const img2 = await loadImage(Buffer.from(img2Data));\n      const img3 = await loadImage(Buffer.from(img3Data));\n\n      // Đợi cho tất cả các ảnh được tải xong\n      Promise.all([new Promise(resolve => img1.addEventListener(\"load\", resolve)), new Promise(resolve => img2.addEventListener(\"load\", resolve)), new Promise(resolve => img3.addEventListener(\"load\", resolve))]).then(() => {\n        // Vẽ ảnh thứ nhất từ điểm (0, 0)\n        ctx.drawImage(img1, 0, 0);\n\n        // Vẽ ảnh thứ hai từ điểm (300, 0)\n        ctx.drawImage(img2, 300, 0);\n\n        // Vẽ ảnh thứ ba từ điểm (600, 0)\n        ctx.drawImage(img3, 600, 0);\n\n        // Lấy ảnh đầu ra từ canvas dưới dạng buffer\n        return canvas.toDataURL(); //canvas.toBuffer(\"image/png\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["createCanvas","loadImage","name","data","mergedImageUrl","mounted","axios","get","then","res","console","log","catch","err","methods","ImageMerging","img1Data","img2Data","img3Data","canvasWidth","canvasHeight","canvas","ctx","getContext","img1","Buffer","from","img2","img3","Promise","all","resolve","addEventListener","drawImage","toDataURL"],"sources":["D:\\LearnVueJS\\Vue3\\Projects\\fa-sop-online\\src\\components\\QMessage\\ImageMerging.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <img :src=\"mergedImageUrl\" alt=\"Merged Image\" />\r\n  </div>\r\n</template>\r\n  \r\n  <script>\r\nimport { createCanvas, loadImage } from \"canvas\";\r\n\r\nexport default {\r\n  name: \"ImageMerging\",\r\n  data() {\r\n    return {\r\n      mergedImageUrl: \"#\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.axios\r\n      .get(`api/chatapp/GetEmpAllGroup?emp_id=10003367`)\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  },\r\n  methods: {\r\n    async ImageMerging(img1Data, img2Data, img3Data) {\r\n      const canvasWidth = 900;\r\n      const canvasHeight = 300;\r\n\r\n      // Tạo đối tượng canvas với kích thước tương ứng\r\n      const canvas = createCanvas(canvasWidth, canvasHeight);\r\n      const ctx = canvas.getContext(\"2d\");\r\n\r\n      const img1 = await loadImage(Buffer.from(img1Data));\r\n\r\n      const img2 = await loadImage(Buffer.from(img2Data));\r\n\r\n      const img3 = await loadImage(Buffer.from(img3Data));\r\n\r\n      // Đợi cho tất cả các ảnh được tải xong\r\n      Promise.all([\r\n        new Promise((resolve) => img1.addEventListener(\"load\", resolve)),\r\n        new Promise((resolve) => img2.addEventListener(\"load\", resolve)),\r\n        new Promise((resolve) => img3.addEventListener(\"load\", resolve)),\r\n      ]).then(() => {\r\n        // Vẽ ảnh thứ nhất từ điểm (0, 0)\r\n        ctx.drawImage(img1, 0, 0);\r\n\r\n        // Vẽ ảnh thứ hai từ điểm (300, 0)\r\n        ctx.drawImage(img2, 300, 0);\r\n\r\n        // Vẽ ảnh thứ ba từ điểm (600, 0)\r\n        ctx.drawImage(img3, 600, 0);\r\n\r\n        // Lấy ảnh đầu ra từ canvas dưới dạng buffer\r\n        return canvas.toDataURL(); //canvas.toBuffer(\"image/png\");\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n  "],"mappings":"AAOA,SAASA,YAAY,EAAEC,SAAQ,QAAS,QAAQ;AAEhD,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,KAAI,CACNC,GAAG,CAAE,4CAA2C,EAChDC,IAAI,CAAEC,GAAG,IAAK;MACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,EACAG,KAAK,CAAEC,GAAG,IAAK;MACdH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC;IAClB,CAAC,CAAC;EACN,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,YAAYA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;MAC/C,MAAMC,WAAU,GAAI,GAAG;MACvB,MAAMC,YAAW,GAAI,GAAG;;MAExB;MACA,MAAMC,MAAK,GAAIrB,YAAY,CAACmB,WAAW,EAAEC,YAAY,CAAC;MACtD,MAAME,GAAE,GAAID,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;MAEnC,MAAMC,IAAG,GAAI,MAAMvB,SAAS,CAACwB,MAAM,CAACC,IAAI,CAACV,QAAQ,CAAC,CAAC;MAEnD,MAAMW,IAAG,GAAI,MAAM1B,SAAS,CAACwB,MAAM,CAACC,IAAI,CAACT,QAAQ,CAAC,CAAC;MAEnD,MAAMW,IAAG,GAAI,MAAM3B,SAAS,CAACwB,MAAM,CAACC,IAAI,CAACR,QAAQ,CAAC,CAAC;;MAEnD;MACAW,OAAO,CAACC,GAAG,CAAC,CACV,IAAID,OAAO,CAAEE,OAAO,IAAKP,IAAI,CAACQ,gBAAgB,CAAC,MAAM,EAAED,OAAO,CAAC,CAAC,EAChE,IAAIF,OAAO,CAAEE,OAAO,IAAKJ,IAAI,CAACK,gBAAgB,CAAC,MAAM,EAAED,OAAO,CAAC,CAAC,EAChE,IAAIF,OAAO,CAAEE,OAAO,IAAKH,IAAI,CAACI,gBAAgB,CAAC,MAAM,EAAED,OAAO,CAAC,CAAC,CACjE,CAAC,CAACvB,IAAI,CAAC,MAAM;QACZ;QACAc,GAAG,CAACW,SAAS,CAACT,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;;QAEzB;QACAF,GAAG,CAACW,SAAS,CAACN,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;;QAE3B;QACAL,GAAG,CAACW,SAAS,CAACL,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;;QAE3B;QACA,OAAOP,MAAM,CAACa,SAAS,EAAE,EAAE;MAC7B,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}