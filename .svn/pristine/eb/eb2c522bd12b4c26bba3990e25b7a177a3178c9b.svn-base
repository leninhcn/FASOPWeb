{"ast":null,"code":"import \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { h, ref, computed, nextTick, getCurrentInstance } from 'vue';\nimport QMenu from '../menu/QMenu.js';\nimport QBtn from '../btn/QBtn.js';\nimport { createComponent } from '../../utils/private/create.js';\nimport clone from '../../utils/clone.js';\nimport { isDeepEqual } from '../../utils/is.js';\nimport { injectProp } from '../../utils/private/inject-obj-prop.js';\nexport default createComponent({\n  name: 'QPopupEdit',\n  props: {\n    modelValue: {\n      required: true\n    },\n    title: String,\n    buttons: Boolean,\n    labelSet: String,\n    labelCancel: String,\n    color: {\n      type: String,\n      default: 'primary'\n    },\n    validate: {\n      type: Function,\n      default: () => true\n    },\n    autoSave: Boolean,\n    /* menu props overrides */\n    cover: {\n      type: Boolean,\n      default: true\n    },\n    /* end of menu props */\n\n    disable: Boolean\n  },\n  emits: ['update:modelValue', 'save', 'cancel', 'beforeShow', 'show', 'beforeHide', 'hide'],\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const {\n      proxy\n    } = getCurrentInstance();\n    const {\n      $q\n    } = proxy;\n    const menuRef = ref(null);\n    const initialValue = ref('');\n    const currentModel = ref('');\n    let validated = false;\n    const scope = computed(() => {\n      return injectProp({\n        initialValue: initialValue.value,\n        validate: props.validate,\n        set,\n        cancel,\n        updatePosition\n      }, 'value', () => currentModel.value, val => {\n        currentModel.value = val;\n      });\n    });\n    function set() {\n      if (props.validate(currentModel.value) === false) {\n        return;\n      }\n      if (hasModelChanged() === true) {\n        emit('save', currentModel.value, initialValue.value);\n        emit('update:modelValue', currentModel.value);\n      }\n      closeMenu();\n    }\n    function cancel() {\n      if (hasModelChanged() === true) {\n        emit('cancel', currentModel.value, initialValue.value);\n      }\n      closeMenu();\n    }\n    function updatePosition() {\n      nextTick(() => {\n        menuRef.value.updatePosition();\n      });\n    }\n    function hasModelChanged() {\n      return isDeepEqual(currentModel.value, initialValue.value) === false;\n    }\n    function closeMenu() {\n      validated = true;\n      menuRef.value.hide();\n    }\n    function onBeforeShow() {\n      validated = false;\n      initialValue.value = clone(props.modelValue);\n      currentModel.value = clone(props.modelValue);\n      emit('beforeShow');\n    }\n    function onShow() {\n      emit('show');\n    }\n    function onBeforeHide() {\n      if (validated === false && hasModelChanged() === true) {\n        if (props.autoSave === true && props.validate(currentModel.value) === true) {\n          emit('save', currentModel.value, initialValue.value);\n          emit('update:modelValue', currentModel.value);\n        } else {\n          emit('cancel', currentModel.value, initialValue.value);\n        }\n      }\n      emit('beforeHide');\n    }\n    function onHide() {\n      emit('hide');\n    }\n    function getContent() {\n      const child = slots.default !== void 0 ? [].concat(slots.default(scope.value)) : [];\n      props.title && child.unshift(h('div', {\n        class: 'q-dialog__title q-mt-sm q-mb-sm'\n      }, props.title));\n      props.buttons === true && child.push(h('div', {\n        class: 'q-popup-edit__buttons row justify-center no-wrap'\n      }, [h(QBtn, {\n        flat: true,\n        color: props.color,\n        label: props.labelCancel || $q.lang.label.cancel,\n        onClick: cancel\n      }), h(QBtn, {\n        flat: true,\n        color: props.color,\n        label: props.labelSet || $q.lang.label.set,\n        onClick: set\n      })]));\n      return child;\n    }\n\n    // expose public methods\n    Object.assign(proxy, {\n      set,\n      cancel,\n      show(e) {\n        menuRef.value !== null && menuRef.value.show(e);\n      },\n      hide(e) {\n        menuRef.value !== null && menuRef.value.hide(e);\n      },\n      updatePosition\n    });\n    return () => {\n      if (props.disable === true) {\n        return;\n      }\n      return h(QMenu, {\n        ref: menuRef,\n        class: 'q-popup-edit',\n        cover: props.cover,\n        onBeforeShow,\n        onShow,\n        onBeforeHide,\n        onHide,\n        onEscapeKey: cancel\n      }, getContent);\n    };\n  }\n});","map":{"version":3,"names":["h","ref","computed","nextTick","getCurrentInstance","QMenu","QBtn","createComponent","clone","isDeepEqual","injectProp","name","props","modelValue","required","title","String","buttons","Boolean","labelSet","labelCancel","color","type","default","validate","Function","autoSave","cover","disable","emits","setup","slots","emit","proxy","$q","menuRef","initialValue","currentModel","validated","scope","value","set","cancel","updatePosition","val","hasModelChanged","closeMenu","hide","onBeforeShow","onShow","onBeforeHide","onHide","getContent","child","concat","unshift","class","push","flat","label","lang","onClick","Object","assign","show","e","onEscapeKey"],"sources":["D:/LearnVueJS/Vue3/Projects/fa-sop-online/node_modules/quasar/src/components/popup-edit/QPopupEdit.js"],"sourcesContent":["import { h, ref, computed, nextTick, getCurrentInstance } from 'vue'\n\nimport QMenu from '../menu/QMenu.js'\nimport QBtn from '../btn/QBtn.js'\n\nimport { createComponent } from '../../utils/private/create.js'\nimport clone from '../../utils/clone.js'\nimport { isDeepEqual } from '../../utils/is.js'\nimport { injectProp } from '../../utils/private/inject-obj-prop.js'\n\nexport default createComponent({\n  name: 'QPopupEdit',\n\n  props: {\n    modelValue: {\n      required: true\n    },\n    title: String,\n    buttons: Boolean,\n    labelSet: String,\n    labelCancel: String,\n\n    color: {\n      type: String,\n      default: 'primary'\n    },\n    validate: {\n      type: Function,\n      default: () => true\n    },\n\n    autoSave: Boolean,\n\n    /* menu props overrides */\n    cover: {\n      type: Boolean,\n      default: true\n    },\n    /* end of menu props */\n\n    disable: Boolean\n  },\n\n  emits: [\n    'update:modelValue', 'save', 'cancel',\n    'beforeShow', 'show', 'beforeHide', 'hide'\n  ],\n\n  setup (props, { slots, emit }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const menuRef = ref(null)\n\n    const initialValue = ref('')\n    const currentModel = ref('')\n\n    let validated = false\n\n    const scope = computed(() => {\n      return injectProp({\n        initialValue: initialValue.value,\n        validate: props.validate,\n        set,\n        cancel,\n        updatePosition\n      }, 'value', () => currentModel.value, val => { currentModel.value = val })\n    })\n\n    function set () {\n      if (props.validate(currentModel.value) === false) {\n        return\n      }\n\n      if (hasModelChanged() === true) {\n        emit('save', currentModel.value, initialValue.value)\n        emit('update:modelValue', currentModel.value)\n      }\n\n      closeMenu()\n    }\n\n    function cancel () {\n      if (hasModelChanged() === true) {\n        emit('cancel', currentModel.value, initialValue.value)\n      }\n\n      closeMenu()\n    }\n\n    function updatePosition () {\n      nextTick(() => {\n        menuRef.value.updatePosition()\n      })\n    }\n\n    function hasModelChanged () {\n      return isDeepEqual(currentModel.value, initialValue.value) === false\n    }\n\n    function closeMenu () {\n      validated = true\n      menuRef.value.hide()\n    }\n\n    function onBeforeShow () {\n      validated = false\n      initialValue.value = clone(props.modelValue)\n      currentModel.value = clone(props.modelValue)\n      emit('beforeShow')\n    }\n\n    function onShow () {\n      emit('show')\n    }\n\n    function onBeforeHide () {\n      if (validated === false && hasModelChanged() === true) {\n        if (props.autoSave === true && props.validate(currentModel.value) === true) {\n          emit('save', currentModel.value, initialValue.value)\n          emit('update:modelValue', currentModel.value)\n        }\n        else {\n          emit('cancel', currentModel.value, initialValue.value)\n        }\n      }\n\n      emit('beforeHide')\n    }\n\n    function onHide () {\n      emit('hide')\n    }\n\n    function getContent () {\n      const child = slots.default !== void 0\n        ? [].concat(slots.default(scope.value))\n        : []\n\n      props.title && child.unshift(\n        h('div', { class: 'q-dialog__title q-mt-sm q-mb-sm' }, props.title)\n      )\n\n      props.buttons === true && child.push(\n        h('div', { class: 'q-popup-edit__buttons row justify-center no-wrap' }, [\n          h(QBtn, {\n            flat: true,\n            color: props.color,\n            label: props.labelCancel || $q.lang.label.cancel,\n            onClick: cancel\n          }),\n          h(QBtn, {\n            flat: true,\n            color: props.color,\n            label: props.labelSet || $q.lang.label.set,\n            onClick: set\n          })\n        ])\n      )\n\n      return child\n    }\n\n    // expose public methods\n    Object.assign(proxy, {\n      set,\n      cancel,\n      show (e) { menuRef.value !== null && menuRef.value.show(e) },\n      hide (e) { menuRef.value !== null && menuRef.value.hide(e) },\n      updatePosition\n    })\n\n    return () => {\n      if (props.disable === true) { return }\n\n      return h(QMenu, {\n        ref: menuRef,\n        class: 'q-popup-edit',\n        cover: props.cover,\n        onBeforeShow,\n        onShow,\n        onBeforeHide,\n        onHide,\n        onEscapeKey: cancel\n      }, getContent)\n    }\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}