{"ast":null,"code":"import { h, ref, computed, watch, onBeforeMount, onMounted, onBeforeUnmount, onActivated, onDeactivated } from 'vue';\nimport QList from '../item/QList.js';\nimport QMarkupTable from '../markup-table/QMarkupTable.js';\nimport getTableMiddle from '../table/get-table-middle.js';\nimport { useVirtualScroll, useVirtualScrollProps } from './use-virtual-scroll.js';\nimport { createComponent } from '../../utils/private/create.js';\nimport { getScrollTarget } from '../../utils/scroll.js';\nimport { listenOpts } from '../../utils/event.js';\nimport { hMergeSlot } from '../../utils/private/render.js';\nconst comps = {\n  list: QList,\n  table: QMarkupTable\n};\nconst typeOptions = ['list', 'table', '__qtable'];\nexport default createComponent({\n  name: 'QVirtualScroll',\n  props: {\n    ...useVirtualScrollProps,\n    type: {\n      type: String,\n      default: 'list',\n      validator: v => typeOptions.includes(v)\n    },\n    items: {\n      type: Array,\n      default: () => []\n    },\n    itemsFn: Function,\n    itemsSize: Number,\n    scrollTarget: {\n      default: void 0\n    }\n  },\n  setup(props, {\n    slots,\n    attrs\n  }) {\n    let localScrollTarget;\n    const rootRef = ref(null);\n    const virtualScrollLength = computed(() => props.itemsSize >= 0 && props.itemsFn !== void 0 ? parseInt(props.itemsSize, 10) : Array.isArray(props.items) ? props.items.length : 0);\n    const {\n      virtualScrollSliceRange,\n      localResetVirtualScroll,\n      padVirtualScroll,\n      onVirtualScrollEvt\n    } = useVirtualScroll({\n      virtualScrollLength,\n      getVirtualScrollTarget,\n      getVirtualScrollEl\n    });\n    const virtualScrollScope = computed(() => {\n      if (virtualScrollLength.value === 0) {\n        return [];\n      }\n      const mapFn = (item, i) => ({\n        index: virtualScrollSliceRange.value.from + i,\n        item\n      });\n      return props.itemsFn === void 0 ? props.items.slice(virtualScrollSliceRange.value.from, virtualScrollSliceRange.value.to).map(mapFn) : props.itemsFn(virtualScrollSliceRange.value.from, virtualScrollSliceRange.value.to - virtualScrollSliceRange.value.from).map(mapFn);\n    });\n    const classes = computed(() => 'q-virtual-scroll q-virtual-scroll' + (props.virtualScrollHorizontal === true ? '--horizontal' : '--vertical') + (props.scrollTarget !== void 0 ? '' : ' scroll'));\n    const attributes = computed(() => props.scrollTarget !== void 0 ? {} : {\n      tabindex: 0\n    });\n    watch(virtualScrollLength, () => {\n      localResetVirtualScroll();\n    });\n    watch(() => props.scrollTarget, () => {\n      unconfigureScrollTarget();\n      configureScrollTarget();\n    });\n    function getVirtualScrollEl() {\n      return rootRef.value.$el || rootRef.value;\n    }\n    function getVirtualScrollTarget() {\n      return localScrollTarget;\n    }\n    function configureScrollTarget() {\n      localScrollTarget = getScrollTarget(getVirtualScrollEl(), props.scrollTarget);\n      localScrollTarget.addEventListener('scroll', onVirtualScrollEvt, listenOpts.passive);\n    }\n    function unconfigureScrollTarget() {\n      if (localScrollTarget !== void 0) {\n        localScrollTarget.removeEventListener('scroll', onVirtualScrollEvt, listenOpts.passive);\n        localScrollTarget = void 0;\n      }\n    }\n    function __getVirtualChildren() {\n      let child = padVirtualScroll(props.type === 'list' ? 'div' : 'tbody', virtualScrollScope.value.map(slots.default));\n      if (slots.before !== void 0) {\n        child = slots.before().concat(child);\n      }\n      return hMergeSlot(slots.after, child);\n    }\n    onBeforeMount(() => {\n      localResetVirtualScroll();\n    });\n    onMounted(() => {\n      configureScrollTarget();\n    });\n    onActivated(() => {\n      configureScrollTarget();\n    });\n    onDeactivated(() => {\n      unconfigureScrollTarget();\n    });\n    onBeforeUnmount(() => {\n      unconfigureScrollTarget();\n    });\n    return () => {\n      if (slots.default === void 0) {\n        console.error('QVirtualScroll: default scoped slot is required for rendering');\n        return;\n      }\n      return props.type === '__qtable' ? getTableMiddle({\n        ref: rootRef,\n        class: 'q-table__middle ' + classes.value\n      }, __getVirtualChildren()) : h(comps[props.type], {\n        ...attrs,\n        ref: rootRef,\n        class: [attrs.class, classes.value],\n        ...attributes.value\n      }, __getVirtualChildren);\n    };\n  }\n});","map":{"version":3,"names":["h","ref","computed","watch","onBeforeMount","onMounted","onBeforeUnmount","onActivated","onDeactivated","QList","QMarkupTable","getTableMiddle","useVirtualScroll","useVirtualScrollProps","createComponent","getScrollTarget","listenOpts","hMergeSlot","comps","list","table","typeOptions","name","props","type","String","default","validator","v","includes","items","Array","itemsFn","Function","itemsSize","Number","scrollTarget","setup","slots","attrs","localScrollTarget","rootRef","virtualScrollLength","parseInt","isArray","length","virtualScrollSliceRange","localResetVirtualScroll","padVirtualScroll","onVirtualScrollEvt","getVirtualScrollTarget","getVirtualScrollEl","virtualScrollScope","value","mapFn","item","i","index","from","slice","to","map","classes","virtualScrollHorizontal","attributes","tabindex","unconfigureScrollTarget","configureScrollTarget","$el","addEventListener","passive","removeEventListener","__getVirtualChildren","child","before","concat","after","console","error","class"],"sources":["D:/LearnVueJS/Vue3/Projects/fa-sop-online/node_modules/quasar/src/components/virtual-scroll/QVirtualScroll.js"],"sourcesContent":["import { h, ref, computed, watch, onBeforeMount, onMounted, onBeforeUnmount, onActivated, onDeactivated } from 'vue'\n\nimport QList from '../item/QList.js'\nimport QMarkupTable from '../markup-table/QMarkupTable.js'\nimport getTableMiddle from '../table/get-table-middle.js'\n\nimport { useVirtualScroll, useVirtualScrollProps } from './use-virtual-scroll.js'\n\nimport { createComponent } from '../../utils/private/create.js'\nimport { getScrollTarget } from '../../utils/scroll.js'\nimport { listenOpts } from '../../utils/event.js'\nimport { hMergeSlot } from '../../utils/private/render.js'\n\nconst comps = {\n  list: QList,\n  table: QMarkupTable\n}\n\nconst typeOptions = [ 'list', 'table', '__qtable' ]\n\nexport default createComponent({\n  name: 'QVirtualScroll',\n\n  props: {\n    ...useVirtualScrollProps,\n\n    type: {\n      type: String,\n      default: 'list',\n      validator: v => typeOptions.includes(v)\n    },\n\n    items: {\n      type: Array,\n      default: () => []\n    },\n\n    itemsFn: Function,\n    itemsSize: Number,\n\n    scrollTarget: {\n      default: void 0\n    }\n  },\n\n  setup (props, { slots, attrs }) {\n    let localScrollTarget\n    const rootRef = ref(null)\n\n    const virtualScrollLength = computed(() => (\n      props.itemsSize >= 0 && props.itemsFn !== void 0\n        ? parseInt(props.itemsSize, 10)\n        : (Array.isArray(props.items) ? props.items.length : 0)\n    ))\n\n    const {\n      virtualScrollSliceRange,\n      localResetVirtualScroll,\n      padVirtualScroll,\n      onVirtualScrollEvt\n    } = useVirtualScroll({\n      virtualScrollLength, getVirtualScrollTarget, getVirtualScrollEl\n    })\n\n    const virtualScrollScope = computed(() => {\n      if (virtualScrollLength.value === 0) {\n        return []\n      }\n\n      const mapFn = (item, i) => ({\n        index: virtualScrollSliceRange.value.from + i,\n        item\n      })\n\n      return props.itemsFn === void 0\n        ? props.items.slice(virtualScrollSliceRange.value.from, virtualScrollSliceRange.value.to).map(mapFn)\n        : props.itemsFn(virtualScrollSliceRange.value.from, virtualScrollSliceRange.value.to - virtualScrollSliceRange.value.from).map(mapFn)\n    })\n\n    const classes = computed(() =>\n      'q-virtual-scroll q-virtual-scroll' + (props.virtualScrollHorizontal === true ? '--horizontal' : '--vertical')\n      + (props.scrollTarget !== void 0 ? '' : ' scroll')\n    )\n\n    const attributes = computed(() => (\n      props.scrollTarget !== void 0 ? {} : { tabindex: 0 }\n    ))\n\n    watch(virtualScrollLength, () => {\n      localResetVirtualScroll()\n    })\n\n    watch(() => props.scrollTarget, () => {\n      unconfigureScrollTarget()\n      configureScrollTarget()\n    })\n\n    function getVirtualScrollEl () {\n      return rootRef.value.$el || rootRef.value\n    }\n\n    function getVirtualScrollTarget () {\n      return localScrollTarget\n    }\n\n    function configureScrollTarget () {\n      localScrollTarget = getScrollTarget(getVirtualScrollEl(), props.scrollTarget)\n      localScrollTarget.addEventListener('scroll', onVirtualScrollEvt, listenOpts.passive)\n    }\n\n    function unconfigureScrollTarget () {\n      if (localScrollTarget !== void 0) {\n        localScrollTarget.removeEventListener('scroll', onVirtualScrollEvt, listenOpts.passive)\n        localScrollTarget = void 0\n      }\n    }\n\n    function __getVirtualChildren () {\n      let child = padVirtualScroll(\n        props.type === 'list' ? 'div' : 'tbody',\n        virtualScrollScope.value.map(slots.default)\n      )\n\n      if (slots.before !== void 0) {\n        child = slots.before().concat(child)\n      }\n\n      return hMergeSlot(slots.after, child)\n    }\n\n    onBeforeMount(() => {\n      localResetVirtualScroll()\n    })\n\n    onMounted(() => {\n      configureScrollTarget()\n    })\n\n    onActivated(() => {\n      configureScrollTarget()\n    })\n\n    onDeactivated(() => {\n      unconfigureScrollTarget()\n    })\n\n    onBeforeUnmount(() => {\n      unconfigureScrollTarget()\n    })\n\n    return () => {\n      if (slots.default === void 0) {\n        console.error('QVirtualScroll: default scoped slot is required for rendering')\n        return\n      }\n\n      return props.type === '__qtable'\n        ? getTableMiddle(\n          { ref: rootRef, class: 'q-table__middle ' + classes.value },\n          __getVirtualChildren()\n        )\n        : h(comps[ props.type ], {\n          ...attrs,\n          ref: rootRef,\n          class: [ attrs.class, classes.value ],\n          ...attributes.value\n        }, __getVirtualChildren)\n    }\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}